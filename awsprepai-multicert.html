<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AWSPrepAI - AWS Certification Study Tool</title>
  <meta name="description" content="Master AWS certifications with practice questions, flashcards, and mock exams. Cloud Practitioner & Solutions Architect.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚òÅÔ∏è</text></svg>">
  <style>
    :root{--bg:#0f172a;--card:#1e293b;--accent:#f59e0b;--accent-2:#fbbf24;--success:#10b981;--warning:#f59e0b;--danger:#ef4444;--text:#f1f5f9;--muted:#94a3b8;--border:#334155;--radius:12px;--aws-orange:#ff9900}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh}
    .container{max-width:1200px;margin:0 auto;padding:1rem}
    header{background:linear-gradient(135deg,#232f3e 0%,#1a2332 100%);border-bottom:3px solid var(--aws-orange);padding:1rem 0}
    .header-content{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
    .logo{display:flex;align-items:center;gap:.75rem;font-size:1.5rem;font-weight:800;color:var(--aws-orange);text-decoration:none}
    .cert-selector{background:var(--bg);border:2px solid var(--aws-orange);color:var(--text);padding:.5rem 1rem;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer}
    .cert-selector:focus{outline:none}
    .nav-tabs{display:flex;gap:.5rem;flex-wrap:wrap}
    .nav-tab{background:transparent;border:1px solid var(--border);color:var(--muted);padding:.5rem 1rem;border-radius:8px;cursor:pointer;font-weight:600;transition:all .2s;font-size:.875rem}
    .nav-tab:hover{border-color:var(--aws-orange);color:var(--aws-orange)}
    .nav-tab.active{background:var(--aws-orange);color:#000;border-color:var(--aws-orange)}
    main{padding:1.5rem 0}
    .app-section{display:none}
    .app-section.active{display:block}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:1.5rem;margin-bottom:1.5rem}
    .card-title{font-size:1.25rem;font-weight:700;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}
    .card-orange{border-left:4px solid var(--aws-orange)}
    .form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}
    .btn{padding:.75rem 1.5rem;border-radius:8px;font-weight:700;cursor:pointer;transition:all .2s;border:none;font-size:.9rem}
    .btn-primary{background:var(--aws-orange);color:#000}
    .btn-primary:hover{background:var(--accent-2)}
    .btn-success{background:var(--success);color:#fff}
    .btn-danger{background:var(--danger);color:#fff}
    .btn-secondary{background:var(--card);color:var(--text);border:1px solid var(--border)}
    .btn-group{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:1rem}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem;margin-bottom:1.5rem}
    .stat-card{background:var(--card);padding:1.25rem;border-radius:var(--radius);text-align:center;border:1px solid var(--border)}
    .stat-value{font-size:2rem;font-weight:800;color:var(--aws-orange)}
    .stat-label{font-size:.75rem;color:var(--muted);margin-top:.25rem}
    .progress-bar{background:var(--border);border-radius:999px;height:12px;margin:.5rem 0;overflow:hidden}
    .progress-fill{height:100%;border-radius:999px;transition:width .3s}
    .progress-fill.good{background:var(--success)}
    .progress-fill.medium{background:var(--warning)}
    .progress-fill.low{background:var(--danger)}
    .quiz-question{font-size:1.25rem;margin-bottom:1.5rem;line-height:1.5}
    .quiz-options{display:grid;gap:.75rem}
    .quiz-option{background:var(--bg);padding:1rem;border-radius:8px;cursor:pointer;border:2px solid var(--border);transition:all .2s}
    .quiz-option:hover{border-color:var(--aws-orange);background:#232f3e}
    .quiz-option.correct{border-color:var(--success);background:rgba(16,185,129,.15)}
    .quiz-option.incorrect{border-color:var(--danger);background:rgba(239,68,68,.15)}
    .data-list{max-height:400px;overflow-y:auto}
    .data-item{background:var(--bg);padding:1rem;border-radius:8px;margin-bottom:.5rem;display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:all .2s}
    .data-item:hover{border-left:3px solid var(--aws-orange)}
    .data-item-info{flex:1}
    .data-item-title{font-weight:600}
    .data-item-meta{font-size:.875rem;color:var(--muted)}
    .data-item-value{font-size:1.25rem;font-weight:700}
    .insight{background:var(--bg);padding:1rem;border-radius:8px;margin-bottom:.75rem;border-left:4px solid var(--aws-orange)}
    .insight.positive{border-left-color:var(--success)}
    .insight.warning{border-left-color:var(--warning)}
    .service-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem}
    .service-card{background:var(--bg);padding:1rem;border-radius:8px;border-left:4px solid var(--aws-orange)}
    .service-name{font-weight:700;font-size:1.1rem;color:var(--aws-orange)}
    .service-desc{font-size:.9rem;color:var(--muted);margin-top:.5rem}
    .exam-timer{font-size:2rem;font-weight:800;color:var(--aws-orange);text-align:center;padding:1rem}
    .cert-badge{display:inline-block;padding:.25rem .75rem;border-radius:999px;font-size:.75rem;font-weight:700;margin-left:.5rem}
    .cert-badge.clf{background:#10b981;color:#fff}
    .cert-badge.saa{background:#3b82f6;color:#fff}
    @media(max-width:768px){.nav-tabs{justify-content:center}.header-content{justify-content:center;flex-direction:column}.stats-grid{grid-template-columns:repeat(2,1fr)}}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div style="display:flex;align-items:center;gap:1rem;flex-wrap:wrap">
          <a href="#" class="logo">‚òÅÔ∏è AWSPrepAI</a>
          <select class="cert-selector" id="certSelector" onchange="switchCert()">
            <option value="clf">‚òÅÔ∏è Cloud Practitioner (CLF-C02)</option>
            <option value="saa">üèóÔ∏è Solutions Architect (SAA-C03)</option>
          </select>
        </div>
        <nav class="nav-tabs">
          <button class="nav-tab active" data-tab="dashboard"><span class="icon">üìä</span><span>Dashboard</span></button>
          <button class="nav-tab" data-tab="quiz"><span class="icon">‚ùì</span><span>Practice</span></button>
          <button class="nav-tab" data-tab="exam"><span class="icon">üìù</span><span>Mock Exam</span></button>
          <button class="nav-tab" data-tab="services"><span class="icon">üìö</span><span>Services</span></button>
        </nav>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Dashboard -->
    <section id="dashboard" class="app-section active">
      <div class="card card-orange">
        <div class="card-title">üéØ Current Certification: <span id="currentCertName">Cloud Practitioner</span><span class="cert-badge clf" id="certBadge">CLF-C02</span></div>
        <p style="color:var(--muted)">Pass score: <span id="passScore">70%</span> | Questions: <span id="examQuestions">65</span> | Time: <span id="examTime">90 min</span></p>
      </div>

      <div class="stats-grid">
        <div class="stat-card"><div class="stat-value" id="totalAnswered">0</div><div class="stat-label">Questions Answered</div></div>
        <div class="stat-card"><div class="stat-value" id="totalAccuracy">--%</div><div class="stat-label">Overall Accuracy</div></div>
        <div class="stat-card"><div class="stat-value" id="bestStreak">0</div><div class="stat-label">Best Streak</div></div>
        <div class="stat-card"><div class="stat-value" id="examReady">No</div><div class="stat-label">Exam Ready?</div></div>
      </div>

      <div class="card">
        <div class="card-title">üìà Progress by Domain</div>
        <div class="form-grid" id="domainProgress"></div>
      </div>

      <div class="card">
        <div class="card-title">‚ö†Ô∏è Weak Areas</div>
        <div id="weakAreas" class="data-list">
          <div class="insight">Complete some questions to identify weak areas!</div>
        </div>
      </div>
    </section>

    <!-- Practice Quiz -->
    <section id="quiz" class="app-section">
      <div class="card">
        <div class="card-title">üéØ Select Domain</div>
        <div class="btn-group" id="categoryBtns"></div>
      </div>

      <div class="card card-orange">
        <div class="card-title">‚òÅÔ∏è <span id="quizCertTitle">AWS Cloud Practitioner</span> <span id="questionCounter" style="font-weight:400;color:var(--muted);font-size:.9rem"></span></div>
        <div id="quizCategory" style="color:var(--aws-orange);font-size:.875rem;margin-bottom:.5rem"></div>
        <div class="quiz-question" id="quizQuestion">Loading question...</div>
        <div class="quiz-options" id="quizOptions"></div>
        <div id="quizExplanation" style="display:none;margin-top:1rem;padding:1rem;background:var(--bg);border-radius:8px;border-left:4px solid var(--aws-orange)"></div>
        <div class="btn-group" style="margin-top:1.5rem">
          <button class="btn btn-primary" id="nextQuizBtn" onclick="nextQuestion()" style="display:none">Next Question ‚Üí</button>
          <button class="btn btn-secondary" onclick="resetQuiz()">üîÑ Reset Progress</button>
        </div>
      </div>
    </section>

    <!-- Mock Exam -->
    <section id="exam" class="app-section">
      <div class="card card-orange">
        <div class="card-title">üìù Mock Certification Exam</div>
        <div id="examStart">
          <div class="stats-grid">
            <div class="stat-card"><div class="stat-value" id="examQCount">65</div><div class="stat-label">Questions</div></div>
            <div class="stat-card"><div class="stat-value" id="examTCount">90</div><div class="stat-label">Minutes</div></div>
            <div class="stat-card"><div class="stat-value" id="examPScore">70%</div><div class="stat-label">Pass Score</div></div>
          </div>
          <button class="btn btn-primary" onclick="startExam()" style="width:100%;padding:1rem;font-size:1.1rem">üöÄ Start Mock Exam</button>
        </div>
        <div id="examInProgress" style="display:none">
          <div class="exam-timer" id="examTimer">90:00</div>
          <div style="text-align:center;color:var(--muted);margin-bottom:1rem" id="examProgress">Question 1 of 65</div>
          <div class="quiz-question" id="examQuestion"></div>
          <div class="quiz-options" id="examOptions"></div>
          <div class="btn-group" style="margin-top:1.5rem">
            <button class="btn btn-primary" onclick="examNext()">Next ‚Üí</button>
            <button class="btn btn-danger" onclick="endExam()">End Exam</button>
          </div>
        </div>
        <div id="examResults" style="display:none">
          <div class="stats-grid">
            <div class="stat-card"><div class="stat-value" id="examScore">0%</div><div class="stat-label">Your Score</div></div>
            <div class="stat-card"><div class="stat-value" id="examCorrect">0</div><div class="stat-label">Correct</div></div>
            <div class="stat-card"><div class="stat-value" id="examResult">--</div><div class="stat-label">Result</div></div>
          </div>
          <button class="btn btn-primary" onclick="restartExam()" style="width:100%">Try Again</button>
        </div>
      </div>
    </section>

    <!-- Services Reference -->
    <section id="services" class="app-section">
      <div class="card">
        <div class="card-title">üîç Search AWS Services</div>
        <input type="text" id="serviceSearch" placeholder="Search services..." style="width:100%;padding:.75rem;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text);font-size:1rem" oninput="filterServices()">
      </div>
      <div class="service-grid" id="serviceGrid"></div>
    </section>
  </main>

  <script>
    const DB = {
      get: (key) => JSON.parse(localStorage.getItem('awsprep_' + key) || '[]'),
      set: (key, data) => localStorage.setItem('awsprep_' + key, JSON.stringify(data)),
      getOne: (key) => JSON.parse(localStorage.getItem('awsprep_' + key) || 'null'),
      setOne: (key, data) => localStorage.setItem('awsprep_' + key, JSON.stringify(data))
    };

    // Tab Navigation
    document.querySelectorAll('.nav-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.app-section').forEach(s => s.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    // Certification Data
    const certifications = {
      clf: {
        name: "Cloud Practitioner",
        code: "CLF-C02",
        passScore: 70,
        questions: 65,
        time: 90,
        domains: ["cloud-concepts", "security", "technology", "billing"],
        domainLabels: { "cloud-concepts": "‚òÅÔ∏è Cloud Concepts", "security": "üîê Security", "technology": "üñ•Ô∏è Technology", "billing": "üí∞ Billing & Pricing" }
      },
      saa: {
        name: "Solutions Architect Associate",
        code: "SAA-C03",
        passScore: 72,
        questions: 65,
        time: 130,
        domains: ["design-secure", "design-resilient", "design-performant", "design-cost"],
        domainLabels: { "design-secure": "üîê Secure Architectures", "design-resilient": "üõ°Ô∏è Resilient Architectures", "design-performant": "‚ö° High-Performing", "design-cost": "üí∞ Cost-Optimized" }
      }
    };

    // CLF-C02 Questions
    const clfQuestions = [
      { cat: "cloud-concepts", q: "What does EC2 stand for?", options: ["Elastic Compute Cloud", "Electronic Computing Center", "Enterprise Cloud Computing", "Elastic Container Cluster"], answer: 0, explain: "EC2 = Elastic Compute Cloud. Virtual servers in the cloud." },
      { cat: "cloud-concepts", q: "What is AWS Lambda?", options: ["Database service", "Serverless compute", "Storage service", "Networking tool"], answer: 1, explain: "Lambda runs code without provisioning servers." },
      { cat: "cloud-concepts", q: "Which service provides object storage?", options: ["EBS", "S3", "RDS", "EC2"], answer: 1, explain: "S3 (Simple Storage Service) stores objects with unlimited scalability." },
      { cat: "cloud-concepts", q: "What is the benefit of cloud computing elasticity?", options: ["Lower security", "Fixed capacity", "Scale up/down based on demand", "Higher latency"], answer: 2, explain: "Elasticity means automatically adjusting resources to match demand." },
      { cat: "cloud-concepts", q: "What is a Region in AWS?", options: ["A single data center", "A geographical area with multiple AZs", "A virtual network", "A security group"], answer: 1, explain: "A Region is a geographical area containing multiple Availability Zones." },
      { cat: "cloud-concepts", q: "What is an Availability Zone?", options: ["Multiple regions combined", "One or more data centers", "A virtual machine", "A storage bucket"], answer: 1, explain: "An AZ is one or more discrete data centers with redundant power and networking." },
      { cat: "cloud-concepts", q: "What EC2 pricing offers biggest discount for long-term?", options: ["On-Demand", "Spot", "Reserved Instances", "Dedicated"], answer: 2, explain: "Reserved Instances offer up to 72% discount for 1-3 year commitments." },
      { cat: "cloud-concepts", q: "What are Spot Instances?", options: ["Free instances", "Unused capacity at discount", "Premium instances", "Dedicated hardware"], answer: 1, explain: "Spot uses spare EC2 capacity at up to 90% discount but can be interrupted." },
      { cat: "cloud-concepts", q: "What is AWS Elastic Beanstalk?", options: ["Container service", "PaaS for apps", "Database", "CDN"], answer: 1, explain: "Elastic Beanstalk is PaaS that handles deployment automatically." },
      { cat: "cloud-concepts", q: "What does an AMI contain?", options: ["Just OS", "Template for EC2", "Container images", "Database"], answer: 1, explain: "AMI is a template with OS, applications, and configurations." },

      { cat: "security", q: "What does IAM stand for?", options: ["Internet Access Management", "Identity and Access Management", "Integrated Application Module", "Instance Availability Manager"], answer: 1, explain: "IAM manages users, groups, roles, and permissions." },
      { cat: "security", q: "What is the shared responsibility model?", options: ["AWS manages all", "Customer manages all", "AWS: infrastructure, Customer: data", "Only enterprise"], answer: 2, explain: "AWS secures the cloud; customers secure what's IN the cloud." },
      { cat: "security", q: "What is an IAM role?", options: ["User account", "Temporary credentials", "Group of users", "Password policy"], answer: 1, explain: "Roles provide temporary credentials for services or cross-account access." },
      { cat: "security", q: "Which service provides DDoS protection?", options: ["WAF", "Shield", "GuardDuty", "Inspector"], answer: 1, explain: "AWS Shield provides DDoS protection." },
      { cat: "security", q: "What is AWS KMS?", options: ["Container management", "Key management", "Kubernetes", "Monitoring"], answer: 1, explain: "KMS creates and manages encryption keys." },
      { cat: "security", q: "What is MFA?", options: ["Multiple Firewall Access", "Multi-Factor Authentication", "Managed File Access", "Main Function Admin"], answer: 1, explain: "MFA adds an extra authentication factor beyond password." },
      { cat: "security", q: "What is principle of least privilege?", options: ["Max permissions", "Only needed permissions", "No permissions", "Admin for all"], answer: 1, explain: "Grant only minimum permissions required for a task." },
      { cat: "security", q: "What does AWS WAF protect against?", options: ["DDoS only", "SQL injection & XSS", "Physical theft", "Power outage"], answer: 1, explain: "WAF protects web apps from common exploits." },

      { cat: "technology", q: "What is VPC?", options: ["Virtual Private Cloud", "Virtual Processing Center", "Verified Public Connection", "Variable Pricing"], answer: 0, explain: "VPC is your isolated network in AWS." },
      { cat: "technology", q: "What is CloudFront?", options: ["DNS service", "CDN", "Database", "Compute"], answer: 1, explain: "CloudFront is a CDN for fast global content delivery." },
      { cat: "technology", q: "What is Route 53?", options: ["CDN", "DNS service", "VPN", "Storage"], answer: 1, explain: "Route 53 is DNS and domain registration service." },
      { cat: "technology", q: "What database is DynamoDB?", options: ["Relational", "Graph", "NoSQL key-value", "Time-series"], answer: 2, explain: "DynamoDB is NoSQL with single-digit ms latency." },
      { cat: "technology", q: "What is RDS?", options: ["NoSQL database", "Managed relational DB", "Cache", "Storage"], answer: 1, explain: "RDS manages MySQL, PostgreSQL, SQL Server, etc." },
      { cat: "technology", q: "What is ElastiCache for?", options: ["Storage", "In-memory caching", "Compute", "Networking"], answer: 1, explain: "ElastiCache provides Redis or Memcached caching." },
      { cat: "technology", q: "What is EBS?", options: ["Object storage", "Block storage for EC2", "File storage", "Archive"], answer: 1, explain: "EBS provides persistent block storage for EC2." },
      { cat: "technology", q: "What is EFS?", options: ["Block storage", "Shared file system", "Object storage", "Archive"], answer: 1, explain: "EFS is shared NFS file storage for multiple EC2." },

      { cat: "billing", q: "What is AWS Free Tier?", options: ["Always free only", "12 months free for new accounts", "Students only", "None"], answer: 1, explain: "Free Tier includes 12 months limited free usage plus always-free services." },
      { cat: "billing", q: "What is Cost Explorer?", options: ["Service catalog", "Visualize costs", "Calculator", "Alarm"], answer: 1, explain: "Cost Explorer visualizes spending patterns." },
      { cat: "billing", q: "What estimates costs before deployment?", options: ["Cost Explorer", "Pricing Calculator", "Budgets", "Trusted Advisor"], answer: 1, explain: "Pricing Calculator estimates costs before use." },
      { cat: "billing", q: "What is AWS Budgets?", options: ["Calculate prices", "Set cost alerts", "Pay bills", "Get refunds"], answer: 1, explain: "Budgets sets alerts when costs exceed thresholds." },
      { cat: "billing", q: "Which support has TAM?", options: ["Basic", "Developer", "Business", "Enterprise"], answer: 3, explain: "Enterprise Support includes Technical Account Manager." },
      { cat: "billing", q: "What is always free?", options: ["EC2 t2.micro", "S3 5GB", "IAM", "RDS"], answer: 2, explain: "IAM is always free - no charge for users, roles, policies." },
      { cat: "billing", q: "What is Consolidated Billing?", options: ["Single bill for multiple accounts", "Installments", "Auto discounts", "Free tier extension"], answer: 0, explain: "Combines usage across accounts for volume discounts." },
      { cat: "billing", q: "On-Demand pricing means?", options: ["Long commitment", "No upfront, pay as you go", "Reserved", "Free"], answer: 1, explain: "On-Demand: pay by hour/second with no commitment." },

      // Additional Exam-Level CLF-C02 Questions (Based on Official AWS Exam Guide)
      // Cloud Concepts - Advanced
      { cat: "cloud-concepts", q: "Which cloud computing model provides the MOST control over infrastructure?", options: ["SaaS", "PaaS", "IaaS", "FaaS"], answer: 2, explain: "IaaS (Infrastructure as a Service) provides most control - you manage OS, middleware, runtime, data, and applications." },
      { cat: "cloud-concepts", q: "What is a key advantage of cloud computing over on-premises?", options: ["Higher upfront costs", "Trade capital expense for variable expense", "Fixed capacity planning", "Longer deployment times"], answer: 1, explain: "Cloud converts CapEx to OpEx - pay only for what you use instead of large upfront investments." },
      { cat: "cloud-concepts", q: "Which AWS service follows a serverless computing model?", options: ["Amazon EC2", "Amazon RDS", "AWS Lambda", "Amazon EMR"], answer: 2, explain: "Lambda is serverless - no server provisioning, automatic scaling, pay per execution." },
      { cat: "cloud-concepts", q: "What does 'high availability' mean in AWS?", options: ["Fastest performance", "System remains operational during failures", "Lowest cost", "Most storage"], answer: 1, explain: "High availability ensures systems continue operating despite component failures, typically using multiple AZs." },
      { cat: "cloud-concepts", q: "Which pillar of AWS Well-Architected Framework focuses on protecting information and systems?", options: ["Operational Excellence", "Security", "Reliability", "Performance Efficiency"], answer: 1, explain: "Security pillar focuses on protecting information, systems, and assets through risk assessments and mitigation." },
      { cat: "cloud-concepts", q: "What is the benefit of deploying across multiple AWS Regions?", options: ["Lower costs only", "Disaster recovery and lower latency for global users", "Simpler architecture", "Automatic scaling"], answer: 1, explain: "Multi-Region provides disaster recovery, business continuity, and reduced latency for users worldwide." },
      { cat: "cloud-concepts", q: "Which describes the AWS Cloud Adoption Framework (CAF)?", options: ["Pricing model", "Guidance for cloud migration", "Security tool", "Database service"], answer: 1, explain: "AWS CAF provides guidance to help organizations develop efficient cloud adoption plans across six perspectives." },
      { cat: "cloud-concepts", q: "What type of cloud deployment connects on-premises to AWS?", options: ["Public cloud", "Private cloud", "Hybrid cloud", "Multi-cloud"], answer: 2, explain: "Hybrid cloud connects on-premises infrastructure with cloud resources, allowing data and apps to move between them." },

      // Security and Compliance - Advanced
      { cat: "security", q: "Which AWS service provides a centralized view of security alerts across accounts?", options: ["Amazon Inspector", "AWS Security Hub", "Amazon GuardDuty", "AWS Config"], answer: 1, explain: "Security Hub aggregates and prioritizes security findings from multiple AWS services and partner tools." },
      { cat: "security", q: "What is AWS Artifact used for?", options: ["Build automation", "Access AWS compliance reports and agreements", "Container registry", "Code deployment"], answer: 1, explain: "AWS Artifact provides on-demand access to AWS security and compliance documents like SOC reports and ISO certs." },
      { cat: "security", q: "Which service helps identify publicly accessible S3 buckets?", options: ["AWS Shield", "Amazon Macie", "AWS Trusted Advisor", "AWS WAF"], answer: 2, explain: "Trusted Advisor checks for S3 bucket permissions and warns about publicly accessible buckets." },
      { cat: "security", q: "In the shared responsibility model, who is responsible for patching the guest OS on EC2?", options: ["AWS only", "Customer only", "Shared equally", "Third-party vendor"], answer: 1, explain: "Customer is responsible for guest OS patches on EC2. AWS handles the underlying infrastructure and hypervisor." },
      { cat: "security", q: "Which service provides managed DDoS protection at no additional cost?", options: ["AWS Shield Standard", "AWS Shield Advanced", "AWS WAF", "Amazon GuardDuty"], answer: 0, explain: "Shield Standard is automatically enabled for all AWS customers at no additional cost, protecting against common DDoS attacks." },
      { cat: "security", q: "What is the purpose of AWS Organizations?", options: ["Container orchestration", "Centrally manage multiple AWS accounts", "Database management", "Network monitoring"], answer: 1, explain: "Organizations lets you centrally manage billing, access, compliance, and security across multiple AWS accounts." },
      { cat: "security", q: "Which feature allows you to require MFA to delete S3 objects?", options: ["S3 Versioning", "MFA Delete", "S3 Object Lock", "S3 Access Points"], answer: 1, explain: "MFA Delete requires multi-factor authentication to change versioning state or permanently delete object versions." },
      { cat: "security", q: "What does AWS CloudTrail record?", options: ["Network traffic", "API calls and user activity", "Application logs", "Database queries"], answer: 1, explain: "CloudTrail logs API calls made to AWS services, providing audit trail of who did what and when." },
      { cat: "security", q: "Which compliance program covers credit card data?", options: ["HIPAA", "PCI DSS", "SOC 2", "FedRAMP"], answer: 1, explain: "PCI DSS (Payment Card Industry Data Security Standard) covers handling of credit card information." },
      { cat: "security", q: "What is an IAM policy?", options: ["Network rule", "JSON document defining permissions", "Encryption key", "User password"], answer: 1, explain: "IAM policy is a JSON document that defines what actions are allowed or denied on which AWS resources." },

      // Technology - Advanced
      { cat: "technology", q: "Which service provides a fully managed message queue?", options: ["Amazon SNS", "Amazon SQS", "Amazon MQ", "AWS Step Functions"], answer: 1, explain: "SQS is a fully managed message queuing service for decoupling application components." },
      { cat: "technology", q: "What is Amazon Aurora?", options: ["NoSQL database", "MySQL/PostgreSQL-compatible relational database", "Data warehouse", "Cache service"], answer: 1, explain: "Aurora is AWS's cloud-native relational database, compatible with MySQL and PostgreSQL, up to 5x faster than standard MySQL." },
      { cat: "technology", q: "Which service is used to run containerized applications?", options: ["AWS Lambda", "Amazon ECS/EKS", "AWS Elastic Beanstalk", "Amazon Lightsail"], answer: 1, explain: "ECS (Elastic Container Service) and EKS (Elastic Kubernetes Service) run containerized applications." },
      { cat: "technology", q: "What is AWS CloudFormation?", options: ["Monitoring service", "Infrastructure as Code service", "Database service", "Security service"], answer: 1, explain: "CloudFormation lets you model and provision AWS resources using templates - Infrastructure as Code." },
      { cat: "technology", q: "Which service provides a virtual desktop in the cloud?", options: ["Amazon EC2", "Amazon WorkSpaces", "AWS AppStream 2.0", "Amazon Connect"], answer: 1, explain: "WorkSpaces provides managed, secure Desktop-as-a-Service (DaaS) solution." },
      { cat: "technology", q: "What does Amazon SNS do?", options: ["Store files", "Send notifications (pub/sub messaging)", "Run containers", "Manage databases"], answer: 1, explain: "SNS (Simple Notification Service) is a pub/sub messaging service for sending notifications to subscribers." },
      { cat: "technology", q: "Which AWS service is a managed Hadoop framework?", options: ["AWS Glue", "Amazon EMR", "Amazon Athena", "AWS Data Pipeline"], answer: 1, explain: "EMR (Elastic MapReduce) is a managed cluster platform for running big data frameworks like Hadoop and Spark." },
      { cat: "technology", q: "What is Amazon Redshift?", options: ["Cache service", "Data warehouse", "NoSQL database", "File storage"], answer: 1, explain: "Redshift is a fully managed, petabyte-scale data warehouse for analytics workloads." },
      { cat: "technology", q: "Which service provides managed Kubernetes?", options: ["Amazon ECS", "Amazon EKS", "AWS Fargate", "Amazon ECR"], answer: 1, explain: "EKS (Elastic Kubernetes Service) is a managed Kubernetes service to run K8s on AWS." },
      { cat: "technology", q: "What is AWS Direct Connect?", options: ["VPN service", "Dedicated network connection to AWS", "CDN service", "DNS service"], answer: 1, explain: "Direct Connect establishes a dedicated, private network connection from your premises to AWS." },

      // Billing and Pricing - Advanced
      { cat: "billing", q: "Which EC2 purchasing option provides the HIGHEST discount?", options: ["On-Demand", "Reserved Instances", "Spot Instances", "Dedicated Hosts"], answer: 2, explain: "Spot Instances offer up to 90% discount, the highest savings, but can be interrupted with 2-min notice." },
      { cat: "billing", q: "What is AWS Savings Plans?", options: ["Storage discount program", "Flexible pricing with commitment to consistent usage", "Free tier extension", "Partner discount"], answer: 1, explain: "Savings Plans offer lower prices in exchange for commitment to consistent usage ($/hour) for 1 or 3 years." },
      { cat: "billing", q: "Which tool provides recommendations for cost optimization?", options: ["AWS Budgets", "AWS Cost Explorer", "AWS Trusted Advisor", "AWS Pricing Calculator"], answer: 2, explain: "Trusted Advisor provides recommendations including cost optimization, like identifying idle resources." },
      { cat: "billing", q: "What is the AWS Free Tier?", options: ["Free forever for all services", "12-month trial plus always-free offers", "Free for students only", "Free weekends"], answer: 1, explain: "Free Tier includes 12 months of limited free usage for new accounts, plus always-free services like Lambda's 1M requests/month." },
      { cat: "billing", q: "Which support plan includes a Technical Account Manager?", options: ["Basic", "Developer", "Business", "Enterprise"], answer: 3, explain: "Only Enterprise Support includes a dedicated Technical Account Manager (TAM)." },
      { cat: "billing", q: "What does AWS Organizations Consolidated Billing provide?", options: ["Volume discounts across accounts", "Free services", "Unlimited usage", "Priority support"], answer: 0, explain: "Consolidated Billing combines usage across all accounts in organization for volume pricing discounts." },
      { cat: "billing", q: "Which service helps set custom cost and usage budgets?", options: ["AWS Cost Explorer", "AWS Budgets", "AWS Pricing Calculator", "AWS Trusted Advisor"], answer: 1, explain: "AWS Budgets lets you set custom budgets and receive alerts when costs or usage exceed thresholds." },
      { cat: "billing", q: "What are AWS Resource Tags used for?", options: ["Security only", "Organize and track costs by project/team", "Performance monitoring", "Network routing"], answer: 1, explain: "Tags are key-value pairs to organize resources and track costs by project, department, environment, etc." },
      { cat: "billing", q: "Which pricing model has NO upfront commitment?", options: ["Reserved Instances", "Savings Plans", "On-Demand", "Dedicated Hosts"], answer: 2, explain: "On-Demand pricing has no upfront commitment - pay by the hour or second with no long-term contracts." },
      { cat: "billing", q: "What is included in AWS Basic Support?", options: ["24/7 phone support", "Customer service, documentation, forums, Trusted Advisor checks", "TAM access", "15-minute response time"], answer: 1, explain: "Basic Support includes customer service, documentation, whitepapers, forums, and limited Trusted Advisor checks." }
    ];

    // SAA-C03 Questions (Solutions Architect) - Full 65-Question Mock Exam
    const saaQuestions = [
      // Design Secure Architectures (16 questions)
      { cat: "design-secure", q: "A Lambda function in Account A needs to access an S3 bucket in Account B. What is required?", options: ["Only IAM role in Account A", "Only bucket policy in Account B", "IAM execution role + resource-based bucket policy", "VPC peering between accounts"], answer: 2, explain: "Cross-account access requires both identity-based policy (IAM role) AND resource-based policy (bucket policy) working together." },
      { cat: "design-secure", q: "How to enable EC2 instances to access S3 without storing credentials?", options: ["Store access keys in environment variables", "Attach IAM role to EC2 instance", "Use S3 pre-signed URLs only", "Enable public access on bucket"], answer: 1, explain: "IAM roles attached to EC2 provide temporary credentials automatically rotated by AWS STS." },
      { cat: "design-secure", q: "What enables private connectivity from VPC to S3 without internet?", options: ["Internet Gateway", "NAT Gateway", "VPC Gateway Endpoint", "AWS PrivateLink"], answer: 2, explain: "VPC Gateway Endpoints for S3 and DynamoDB allow private access without traversing the internet." },
      { cat: "design-secure", q: "Which KMS key type does AWS fully manage including rotation?", options: ["Customer managed CMK", "AWS managed key", "Imported key material", "CloudHSM key"], answer: 1, explain: "AWS managed keys are created, managed, and rotated automatically by AWS for integrated services." },
      { cat: "design-secure", q: "How to restrict S3 bucket access to only requests from a specific VPC?", options: ["Security group rules", "Bucket policy with aws:sourceVpc condition", "S3 Access Points only", "IAM user policies"], answer: 1, explain: "Bucket policies with aws:sourceVpc or aws:sourceVpce conditions restrict access to specific VPCs/endpoints." },
      { cat: "design-secure", q: "What automatically encrypts all new EBS volumes?", options: ["Lambda function on creation", "Account-level default EBS encryption", "CloudWatch Events trigger", "EC2 user data script"], answer: 1, explain: "Enable default EBS encryption at the account/region level to auto-encrypt all new volumes." },
      { cat: "design-secure", q: "Which service uses ML to continuously monitor for malicious activity?", options: ["AWS Inspector", "Amazon GuardDuty", "AWS Config", "AWS Shield"], answer: 1, explain: "GuardDuty uses machine learning and threat intelligence to detect threats across AWS accounts." },
      { cat: "design-secure", q: "How should secrets be stored for an application running on EC2?", options: ["Hardcoded in application code", "Environment variables in user data", "AWS Secrets Manager with IAM role", "S3 bucket with encryption"], answer: 2, explain: "Secrets Manager securely stores and automatically rotates secrets, accessed via IAM roles." },
      { cat: "design-secure", q: "What provides web application protection against SQL injection and XSS?", options: ["Security Groups", "NACLs", "AWS WAF", "AWS Shield Standard"], answer: 2, explain: "AWS WAF (Web Application Firewall) protects against common web exploits like SQLi and XSS." },
      { cat: "design-secure", q: "How to enforce MFA for all IAM users accessing the AWS Console?", options: ["Enable MFA on root only", "IAM policy with aws:MultiFactorAuthPresent condition", "Security Hub requirement", "CloudTrail logging"], answer: 1, explain: "IAM policies with MFA conditions can deny access unless MFA is authenticated." },
      { cat: "design-secure", q: "Which service discovers and protects sensitive data in S3?", options: ["AWS Inspector", "Amazon Macie", "AWS Config", "S3 Object Lock"], answer: 1, explain: "Amazon Macie uses ML to discover, classify, and protect sensitive data like PII in S3." },
      { cat: "design-secure", q: "How to securely connect on-premises network to AWS VPC?", options: ["Internet Gateway", "AWS Site-to-Site VPN", "NAT Gateway", "VPC Peering"], answer: 1, explain: "Site-to-Site VPN creates encrypted IPsec tunnel between on-premises and AWS VPC." },
      { cat: "design-secure", q: "What validates that AWS resources comply with security policies?", options: ["AWS Config Rules", "CloudWatch Alarms", "CloudTrail Logs", "IAM Access Analyzer"], answer: 0, explain: "AWS Config Rules evaluate resource configurations against desired security settings." },
      { cat: "design-secure", q: "How to grant temporary cross-account access without sharing credentials?", options: ["Share IAM user credentials", "IAM role with trust policy for external account", "Create IAM user in both accounts", "Use same root account"], answer: 1, explain: "IAM roles with cross-account trust policies allow secure temporary access via AssumeRole." },
      { cat: "design-secure", q: "What encrypts data in transit to RDS?", options: ["KMS encryption", "SSL/TLS certificates", "S3 SSE", "EBS encryption"], answer: 1, explain: "SSL/TLS encrypts data in transit; KMS/EBS encrypts at rest." },
      { cat: "design-secure", q: "Which service provides centralized security findings across AWS accounts?", options: ["AWS Organizations", "AWS Security Hub", "Amazon Detective", "AWS Artifact"], answer: 1, explain: "Security Hub aggregates security findings from GuardDuty, Inspector, Macie, and third-party tools." },

      // Design Resilient Architectures (17 questions)
      { cat: "design-resilient", q: "What automatically replaces unhealthy EC2 instances?", options: ["Elastic Load Balancer", "Auto Scaling Group", "Route 53 health checks", "CloudWatch Alarms"], answer: 1, explain: "Auto Scaling Groups detect unhealthy instances and automatically launch replacements." },
      { cat: "design-resilient", q: "Minimum number of Availability Zones for high availability?", options: ["1", "2", "3", "4"], answer: 1, explain: "At least 2 AZs are required for high availability to survive a single AZ failure." },
      { cat: "design-resilient", q: "What replicates S3 objects to another AWS Region automatically?", options: ["S3 Transfer Acceleration", "S3 Cross-Region Replication", "S3 Lifecycle Rules", "AWS DataSync"], answer: 1, explain: "S3 CRR automatically replicates objects to a bucket in another region for DR." },
      { cat: "design-resilient", q: "What does RDS Multi-AZ deployment provide?", options: ["Read scaling", "Automatic failover to standby", "Cost reduction", "Cross-region replication"], answer: 1, explain: "Multi-AZ maintains a synchronous standby replica with automatic failover." },
      { cat: "design-resilient", q: "How does Route 53 improve availability?", options: ["Caches DNS responses", "Health checks with failover routing", "Reduces latency only", "Provides DDoS protection"], answer: 1, explain: "Route 53 health checks detect failures and route traffic to healthy endpoints." },
      { cat: "design-resilient", q: "What is the durability of S3 Standard?", options: ["99.9%", "99.99%", "99.999999999% (11 9s)", "99.95%"], answer: 2, explain: "S3 Standard provides 99.999999999% durability by storing across multiple AZs." },
      { cat: "design-resilient", q: "What decouples application components for better fault tolerance?", options: ["Direct synchronous API calls", "Amazon SQS queues", "Shared database", "Hard-coded endpoints"], answer: 1, explain: "SQS queues decouple producers and consumers, allowing independent scaling and failure handling." },
      { cat: "design-resilient", q: "Aurora provides automatic failover to which resource?", options: ["Read Replica in same region", "Standby in another AZ", "S3 backup", "Manual snapshot"], answer: 0, explain: "Aurora automatically promotes a read replica to primary during failure." },
      { cat: "design-resilient", q: "How to protect against Regional AWS outages?", options: ["Multiple AZs only", "Multi-Region architecture", "Larger instance types", "More security groups"], answer: 1, explain: "Multi-Region deployments with Route 53 failover protect against regional failures." },
      { cat: "design-resilient", q: "What enables stateless application design for better scaling?", options: ["Store sessions in EC2 memory", "Store sessions in ElastiCache/DynamoDB", "Use sticky sessions only", "Single large instance"], answer: 1, explain: "External session storage (ElastiCache/DynamoDB) enables stateless instances that scale horizontally." },
      { cat: "design-resilient", q: "Lambda function timeout and how to handle long processes?", options: ["Increase to 24 hours", "Use Step Functions for orchestration", "Run synchronously only", "Disable timeout"], answer: 1, explain: "Lambda has 15-minute max timeout; Step Functions orchestrate long-running workflows." },
      { cat: "design-resilient", q: "What AWS service provides managed message queuing with exactly-once processing?", options: ["Amazon SNS", "Amazon SQS FIFO", "Amazon Kinesis", "AWS EventBridge"], answer: 1, explain: "SQS FIFO queues provide exactly-once processing and message ordering." },
      { cat: "design-resilient", q: "How to ensure DynamoDB data survives regional disaster?", options: ["Point-in-time recovery only", "DynamoDB Global Tables", "Export to S3 daily", "Provisioned capacity"], answer: 1, explain: "Global Tables provide multi-region, multi-active replication with automatic failover." },
      { cat: "design-resilient", q: "What enables EBS volume recovery from point-in-time snapshots?", options: ["EBS Lifecycle Manager", "AWS Backup", "Both A and B", "Manual snapshots only"], answer: 2, explain: "Both EBS Lifecycle Manager and AWS Backup automate EBS snapshot scheduling." },
      { cat: "design-resilient", q: "How does Application Load Balancer improve resilience?", options: ["Terminates SSL only", "Distributes traffic across healthy targets in multiple AZs", "Provides static IPs", "Blocks DDoS attacks"], answer: 1, explain: "ALB health checks route traffic only to healthy targets across multiple AZs." },
      { cat: "design-resilient", q: "What is the RTO difference between Multi-AZ and Read Replicas?", options: ["Same RTO", "Multi-AZ: minutes, Read Replica: manual promotion", "Read Replica faster", "Neither provides DR"], answer: 1, explain: "Multi-AZ provides automatic failover (1-2 min); Read Replica requires manual promotion." },
      { cat: "design-resilient", q: "How to implement circuit breaker pattern in AWS?", options: ["Security Groups", "Step Functions with error handling", "CloudWatch Alarms", "VPC Flow Logs"], answer: 1, explain: "Step Functions can implement circuit breakers with retry logic and error states." },

      // Design High-Performing Architectures (16 questions)
      { cat: "design-performant", q: "What caches frequently accessed database queries?", options: ["RDS Proxy", "Amazon ElastiCache", "DynamoDB DAX", "Both B and C"], answer: 3, explain: "ElastiCache (Redis/Memcached) caches RDS queries; DAX caches DynamoDB queries." },
      { cat: "design-performant", q: "Which EBS volume type provides highest IOPS?", options: ["gp3", "io2 Block Express", "st1", "sc1"], answer: 1, explain: "io2 Block Express provides up to 256,000 IOPS for demanding workloads." },
      { cat: "design-performant", q: "What accelerates global uploads to S3?", options: ["CloudFront", "S3 Transfer Acceleration", "Direct Connect", "S3 Intelligent-Tiering"], answer: 1, explain: "Transfer Acceleration uses CloudFront edge locations for faster long-distance uploads." },
      { cat: "design-performant", q: "How does CloudFront improve application performance?", options: ["Larger EC2 instances", "Edge location caching near users", "Database optimization", "Load balancing"], answer: 1, explain: "CloudFront caches content at 400+ edge locations, reducing latency globally." },
      { cat: "design-performant", q: "What provides microsecond latency for DynamoDB reads?", options: ["Provisioned capacity", "DynamoDB Accelerator (DAX)", "Global Tables", "On-demand capacity"], answer: 1, explain: "DAX is an in-memory cache providing microsecond read latency for DynamoDB." },
      { cat: "design-performant", q: "How to scale Lambda function performance?", options: ["Increase instance type", "Allocate more memory (also increases CPU)", "Add more ENIs", "Use larger VPC"], answer: 1, explain: "Lambda CPU scales proportionally with memory allocation (128MB to 10GB)." },
      { cat: "design-performant", q: "What offloads read traffic from primary RDS database?", options: ["Multi-AZ standby", "Read Replicas", "RDS Proxy", "Parameter groups"], answer: 1, explain: "Read Replicas handle read queries, scaling read capacity up to 5x (15 for Aurora)." },
      { cat: "design-performant", q: "How does Global Accelerator improve performance?", options: ["Database caching", "Routes traffic over AWS global network", "Increases instance size", "Compresses data"], answer: 1, explain: "Global Accelerator uses anycast IPs and AWS backbone for consistent low latency." },
      { cat: "design-performant", q: "What is the best storage for high-performance computing (HPC)?", options: ["EBS gp2", "Amazon FSx for Lustre", "S3 Standard", "EFS General Purpose"], answer: 1, explain: "FSx for Lustre provides sub-millisecond latencies for HPC and ML workloads." },
      { cat: "design-performant", q: "How to reduce Lambda cold starts?", options: ["Smaller package size", "Provisioned Concurrency", "Longer timeout", "Both A and B"], answer: 3, explain: "Smaller packages and Provisioned Concurrency both reduce cold start times." },
      { cat: "design-performant", q: "What enables parallel processing of Kinesis data streams?", options: ["Single shard", "Multiple shards", "Batch processing only", "S3 export"], answer: 1, explain: "Each Kinesis shard provides 1MB/s input, 2MB/s output; add shards for parallelism." },
      { cat: "design-performant", q: "How to optimize SQL database queries on RDS?", options: ["Increase storage", "Enable Performance Insights and optimize slow queries", "Use Multi-AZ", "Disable encryption"], answer: 1, explain: "Performance Insights identifies bottlenecks; optimize indexes and queries accordingly." },
      { cat: "design-performant", q: "What provides persistent, shared file storage for EC2 with high throughput?", options: ["EBS", "Instance Store", "Amazon EFS", "S3"], answer: 2, explain: "EFS provides shared NFS storage that scales automatically with high throughput modes." },
      { cat: "design-performant", q: "How to handle traffic spikes for a web application?", options: ["Manual scaling", "Auto Scaling with target tracking", "Single large instance", "Scheduled scaling only"], answer: 1, explain: "Target tracking Auto Scaling automatically adjusts capacity based on metrics like CPU." },
      { cat: "design-performant", q: "What is the fastest way to query large datasets in S3?", options: ["Download and process locally", "S3 Select / Athena", "Transfer to EC2 first", "Use CloudFront"], answer: 1, explain: "S3 Select and Athena query data in-place without full download, improving speed." },
      { cat: "design-performant", q: "How does RDS Proxy improve database performance?", options: ["Query caching", "Connection pooling and multiplexing", "Read replication", "Storage optimization"], answer: 1, explain: "RDS Proxy pools connections, reducing database overhead from many Lambda functions." },

      // Design Cost-Optimized Architectures (16 questions)
      { cat: "design-cost", q: "Most cost-effective option for steady-state, predictable workloads?", options: ["On-Demand Instances", "Spot Instances", "Reserved Instances or Savings Plans", "Dedicated Hosts"], answer: 2, explain: "Reserved Instances and Savings Plans offer up to 72% discount for committed usage." },
      { cat: "design-cost", q: "Cheapest S3 storage class for rarely accessed archive data?", options: ["S3 Standard", "S3 Standard-IA", "S3 Glacier Deep Archive", "S3 One Zone-IA"], answer: 2, explain: "Glacier Deep Archive is cheapest at ~$1/TB/month for long-term archives." },
      { cat: "design-cost", q: "What automatically moves S3 objects to cheaper storage classes?", options: ["S3 Versioning", "S3 Lifecycle Policies", "S3 Replication", "S3 Object Lock"], answer: 1, explain: "Lifecycle policies transition objects based on age (e.g., to IA after 30 days)." },
      { cat: "design-cost", q: "Best use case for Spot Instances?", options: ["Production databases", "Fault-tolerant batch processing", "Mission-critical web servers", "Stateful applications"], answer: 1, explain: "Spot Instances are ideal for interruptible workloads like batch jobs, CI/CD, big data." },
      { cat: "design-cost", q: "What does right-sizing EC2 instances achieve?", options: ["Maximum performance", "Matching resources to actual usage needs", "More availability zones", "Automatic scaling"], answer: 1, explain: "Right-sizing eliminates waste by using appropriately sized instances for workloads." },
      { cat: "design-cost", q: "Which service identifies cost optimization opportunities?", options: ["CloudWatch", "AWS Trusted Advisor", "AWS Config", "Systems Manager"], answer: 1, explain: "Trusted Advisor Cost Optimization checks for idle resources, underutilized instances." },
      { cat: "design-cost", q: "Why is serverless cost-effective for variable workloads?", options: ["Fixed monthly pricing", "Pay only for actual execution time/requests", "Free tier always applies", "Reserved capacity discounts"], answer: 1, explain: "Lambda charges per 1ms of execution; no cost when not running." },
      { cat: "design-cost", q: "Is data transfer between AZs in the same region free?", options: ["Yes, always free", "No, it costs ~$0.01/GB", "Free for EC2 only", "Free with VPC"], answer: 1, explain: "Cross-AZ data transfer is charged; design to minimize unnecessary cross-AZ traffic." },
      { cat: "design-cost", q: "How to reduce NAT Gateway costs for S3/DynamoDB access?", options: ["Larger NAT Gateway", "VPC Gateway Endpoints (free)", "Direct Connect", "Internet Gateway"], answer: 1, explain: "Gateway Endpoints for S3/DynamoDB are free and avoid NAT Gateway charges." },
      { cat: "design-cost", q: "What provides visibility into AWS spending patterns?", options: ["CloudTrail", "AWS Cost Explorer", "CloudWatch", "AWS Config"], answer: 1, explain: "Cost Explorer visualizes spending, forecasts costs, and identifies trends." },
      { cat: "design-cost", q: "How to optimize costs for infrequently accessed EFS data?", options: ["Delete old files", "EFS Infrequent Access storage class", "Move to S3 manually", "Use smaller instances"], answer: 1, explain: "EFS IA reduces storage costs by 92% for files not accessed frequently." },
      { cat: "design-cost", q: "What is the most cost-effective compute for containers?", options: ["EC2 On-Demand", "Fargate Spot", "Dedicated Hosts", "Outposts"], answer: 1, explain: "Fargate Spot provides up to 70% discount for fault-tolerant container workloads." },
      { cat: "design-cost", q: "How to prevent unexpected AWS bills?", options: ["Hope for the best", "AWS Budgets with alerts", "Check console daily", "Disable all services"], answer: 1, explain: "AWS Budgets alerts when spending approaches or exceeds defined thresholds." },
      { cat: "design-cost", q: "What is the benefit of Consolidated Billing?", options: ["Free services", "Volume discounts across accounts", "Automatic refunds", "Unlimited usage"], answer: 1, explain: "Consolidated Billing aggregates usage across accounts for volume pricing tiers." },
      { cat: "design-cost", q: "How to reduce costs for development/test environments?", options: ["Same as production", "Smaller instances, stop when not in use", "No backups needed", "Skip all testing"], answer: 1, explain: "Use smaller instances, stop outside business hours, use Spot for dev/test." },
      { cat: "design-cost", q: "What is S3 Intelligent-Tiering best for?", options: ["Archive data", "Unknown or changing access patterns", "Frequently accessed only", "One-time access"], answer: 1, explain: "Intelligent-Tiering automatically moves objects between tiers based on access patterns." },

      // Udemy Practice Exam - Additional 65 Questions
      // Design Resilient Architectures
      { cat: "design-resilient", q: "A company needs visual, code-free data transformation with profiling and lineage. Which service?", options: ["Amazon Athena", "AWS Glue DataBrew", "AWS Glue Studio", "Amazon AppFlow"], answer: 1, explain: "AWS Glue DataBrew provides visual data preparation with recipes, profiling, and lineage tracking - no code required." },
      { cat: "design-resilient", q: "SNS to Lambda notifications failing during peak 5000 req/sec. What's the issue?", options: ["SNS scalability limit", "Lambda concurrency quota exceeded", "Need more SNS servers", "Need more Lambda servers"], answer: 1, explain: "Lambda has account concurrency limits. Contact AWS support to raise the limit when SNS deliveries are throttled." },
      { cat: "design-resilient", q: "RDS Multi-AZ uses which replication type?", options: ["Asynchronous", "Synchronous", "Semi-synchronous", "Logical"], answer: 1, explain: "Multi-AZ uses synchronous replication for zero data loss. Read Replicas use asynchronous replication." },
      { cat: "design-resilient", q: "ALB routing based on URL path like /orders and /products?", options: ["Host-based routing", "Path-based routing", "Query string routing", "Header-based routing"], answer: 1, explain: "Path-based routing routes requests based on URL path patterns to different target groups." },
      { cat: "design-resilient", q: "SQS FIFO queue processing 1000 msg/sec. What batch size needed?", options: ["2 messages", "4 messages", "10 messages", "No batching needed"], answer: 1, explain: "FIFO supports 300 msg/sec default. With batching of 4, you get 1200 msg/sec (300 x 4)." },
      { cat: "design-resilient", q: "Protect S3 objects from accidental deletion?", options: ["S3 encryption", "Versioning + MFA Delete", "S3 lifecycle", "S3 replication"], answer: 1, explain: "Enable versioning to keep object versions, and MFA Delete to require MFA for permanent deletions." },
      { cat: "design-resilient", q: "Serverless solution to process game score updates in order?", options: ["SQS + EC2", "Kinesis + Lambda + DynamoDB", "SNS + EC2", "SQS + RDS"], answer: 1, explain: "Kinesis Data Streams with Lambda provides serverless, ordered message processing to DynamoDB." },
      { cat: "design-resilient", q: "Auto Scaling group with unbalanced AZs. How does rebalancing work?", options: ["Terminates first, then launches", "Launches first, then terminates", "Simultaneous", "Manual intervention"], answer: 1, explain: "ASG launches new instances before terminating old ones during rebalancing to maintain availability." },
      { cat: "design-resilient", q: "CloudWatch metric filter for CloudTrail to detect illegal API calls?", options: ["Use CloudTrail Insights only", "Create metric filter + alarm + SNS", "Use Athena queries", "Use Trusted Advisor"], answer: 1, explain: "Create CloudWatch metric filter on CloudTrail logs, set alarm on the metric, notify via SNS." },
      { cat: "design-resilient", q: "Government app needs exactly-once message processing. Which service?", options: ["SQS Standard", "SQS FIFO", "SNS", "EventBridge"], answer: 1, explain: "SQS FIFO queues guarantee exactly-once processing and message ordering." },
      { cat: "design-resilient", q: "EC2 maintenance in ASG without replacement. Best approach?", options: ["Delete ASG", "Put instance in Standby state", "Terminate instance", "Disable health checks globally"], answer: 1, explain: "Standby state keeps instance in ASG but excludes from load balancing during maintenance." },
      { cat: "design-resilient", q: "Scheduled Auto Scaling for month-end peak. Set desired capacity to?", options: ["Min count", "Max count", "Desired capacity to 10", "Both min and max to 10"], answer: 2, explain: "Use scheduled action with desired capacity for exact instance count at specific times." },

      // Design Secure Architectures
      { cat: "design-secure", q: "Root user security best practices?", options: ["Share credentials with owner", "Strong password + MFA", "Create access keys always", "Email password to backup"], answer: 1, explain: "Use strong password, enable MFA, never share credentials, avoid creating root access keys." },
      { cat: "design-secure", q: "Restrict live streaming to USA only. Which services?", options: ["Route 53 weighted + failover", "CloudFront geo-restriction + Route 53 geolocation", "VPC security groups", "Route 53 latency routing"], answer: 1, explain: "CloudFront geo-restriction and Route 53 geolocation routing restrict content by country." },
      { cat: "design-secure", q: "Encrypt S3 data with audit trail of key usage?", options: ["SSE-S3", "SSE-KMS", "SSE-C", "Client-side encryption"], answer: 1, explain: "SSE-KMS provides encryption with CloudTrail audit trail showing when and who used the key." },
      { cat: "design-secure", q: "Control maximum permissions developers can grant?", options: ["IAM groups", "Permissions boundary", "Resource policies", "SCPs only"], answer: 1, explain: "Permissions boundaries set maximum permissions that IAM principals can have." },
      { cat: "design-secure", q: "WAF on ALB blocks traffic from which countries?", options: ["Any country via geo match", "USA only", "Cannot block by country", "Requires CloudFront"], answer: 0, explain: "AWS WAF geo match conditions can block or allow traffic based on country of origin." },
      { cat: "design-secure", q: "Delegate cross-account access without sharing credentials?", options: ["Share IAM user", "IAM role with trust policy", "Same root account", "VPC peering"], answer: 1, explain: "IAM roles with cross-account trust policies allow secure temporary access via AssumeRole." },
      { cat: "design-secure", q: "IAM best practices for CloudTrail?", options: ["Disable logging", "Log all IAM actions", "Log root only", "Weekly logging"], answer: 1, explain: "Enable CloudTrail to log all IAM actions for auditing and monitoring." },
      { cat: "design-secure", q: "S3 DeleteObject permission - correct resource ARN?", options: ["arn:aws:s3:::bucket", "arn:aws:s3:::bucket/*", "arn:aws:s3:::bucket*", "arn:aws:s3:::*"], answer: 1, explain: "Object-level permissions require bucket/* ARN format, not just the bucket ARN." },
      { cat: "design-secure", q: "Private DNS resolution from VPC to on-premises?", options: ["Route 53 inbound endpoint", "Route 53 outbound endpoint with forwarding rule", "Private hosted zone", "Hybrid gateway"], answer: 1, explain: "Outbound endpoint forwards DNS queries from VPC to on-premises DNS servers." },
      { cat: "design-secure", q: "Connect to partner's RDS privately without internet?", options: ["VPC peering", "NLB + PrivateLink endpoint", "Public RDS + security group", "Client VPN"], answer: 1, explain: "Partner creates NLB in front of RDS, exposes via PrivateLink. Company uses interface endpoint." },
      { cat: "design-secure", q: "EKS Pod-level permissions following least privilege?", options: ["EC2 instance profile for all", "IRSA with separate service accounts", "Single shared service account", "Kubernetes RBAC only"], answer: 1, explain: "IAM Roles for Service Accounts (IRSA) provides fine-grained Pod-level IAM permissions." },
      { cat: "design-secure", q: "Centrally manage access for developers across AWS accounts with on-prem AD?", options: ["AWS Managed AD", "AD Connector + IAM Identity Center", "Custom IdP on EC2", "Control Tower only"], answer: 1, explain: "AD Connector proxies to on-prem AD. IAM Identity Center provides SSO with permission sets." },
      { cat: "design-secure", q: "Monitor S3 for malicious activity, EC2 for vulnerabilities?", options: ["Inspector for both", "GuardDuty for both", "GuardDuty for S3, Inspector for EC2", "Macie for both"], answer: 2, explain: "GuardDuty monitors threats across S3/accounts. Inspector scans EC2 for vulnerabilities." },
      { cat: "design-secure", q: "EFS access control for EC2 instances?", options: ["Security groups + IAM policies", "NACLs only", "GuardDuty", "S3 bucket policies"], answer: 0, explain: "Use VPC security groups for network control and IAM policies for file system permissions." },
      { cat: "design-secure", q: "Run Kubernetes on-premises with AWS APIs but all data local?", options: ["EKS in cloud", "EKS Anywhere on Outposts", "EKS with Direct Connect", "Snowball Edge"], answer: 1, explain: "AWS Outposts Rack with EKS Anywhere runs Kubernetes on-premises with AWS integration." },

      // Design High-Performing Architectures
      { cat: "design-performant", q: "Faster S3 uploads across continents?", options: ["CloudFront", "S3 Transfer Acceleration + Multipart", "Direct Connect", "VPN"], answer: 1, explain: "S3 Transfer Acceleration uses edge locations. Multipart upload enables parallel transfers." },
      { cat: "design-performant", q: "2GB file upload to S3 - fastest method?", options: ["Single PUT", "Multipart + S3TA", "FTP to EC2 first", "Multipart only"], answer: 1, explain: "Combine multipart upload with Transfer Acceleration for fastest uploads over long distances." },
      { cat: "design-performant", q: "Microsoft DFS migration to AWS?", options: ["FSx for Lustre", "FSx for Windows File Server", "AWS Managed AD", "SQL Server on AWS"], answer: 1, explain: "FSx for Windows supports DFS for organizing shares into folder structures up to hundreds of PB." },
      { cat: "design-performant", q: "Global UDP application with fast regional failover?", options: ["Route 53", "CloudFront", "AWS Global Accelerator", "ELB"], answer: 2, explain: "Global Accelerator supports TCP/UDP, provides static IPs, and fast regional failover." },
      { cat: "design-performant", q: "On-premises dynamic website for Asia users, backend in US?", options: ["S3 + CRR", "CloudFront with custom origin to on-prem", "Route 53 geo-proximity", "CloudFront with Route 53 DNS origin"], answer: 1, explain: "CloudFront caches at edge locations near users, custom origin points to on-premises servers." },
      { cat: "design-performant", q: "Extract ingredients from text files without ML expertise?", options: ["SageMaker custom model", "Amazon Comprehend custom entity recognition", "Amazon Transcribe", "Lookout for Vision"], answer: 1, explain: "Comprehend's custom entity recognition extracts entities from text without ML expertise." },
      { cat: "design-performant", q: "REST API for real-time location analytics?", options: ["API Gateway + Lambda", "API Gateway + Kinesis Data Analytics", "Athena + S3", "QuickSight + Redshift"], answer: 1, explain: "API Gateway receives requests, Kinesis Data Analytics processes real-time streaming data." },
      { cat: "design-performant", q: "Database timeouts during peak - serverless scaling solution?", options: ["Manual EC2 scaling", "RDS Proxy + SQS + Auto Scaling workers", "Larger RDS instance", "Aurora Serverless only"], answer: 1, explain: "RDS Proxy handles connection pooling. SQS decouples. Auto Scaling handles worker capacity." },
      { cat: "design-performant", q: "High random I/O for HPC with replicated data across fleet?", options: ["EBS io2", "Instance Store", "EFS", "S3"], answer: 1, explain: "Instance Store provides high I/O at no extra cost; data replicated by application handles failures." },
      { cat: "design-performant", q: "FSx for Lustre use case?", options: ["Windows file shares", "HPC and ML workloads", "DFS support", "Microsoft AD"], answer: 1, explain: "FSx for Lustre provides sub-millisecond latency for HPC, ML, and video processing." },
      { cat: "design-performant", q: "S3 bucket with 5000+ req/sec hitting scalability issues?", options: ["Use bigger bucket", "Create customer-specific prefixes", "One bucket per customer", "One bucket per day"], answer: 1, explain: "S3 supports 3,500 PUT and 5,500 GET per prefix. Use prefixes to parallelize and scale." },
      { cat: "design-performant", q: "EC2 placement for low-latency HPC?", options: ["Spread placement group", "Partition placement group", "Cluster placement group", "Auto Scaling group"], answer: 2, explain: "Cluster placement groups pack instances close together for low-latency, high-throughput HPC." },
      { cat: "design-performant", q: "EFS shared across regions?", options: ["Not possible", "Inter-region VPC peering", "EFS replication only", "S3 required"], answer: 1, explain: "EFS can be accessed across regions using inter-region VPC peering connections." },
      { cat: "design-performant", q: "AMI copied to Region B creates what in Region B?", options: ["Just AMI", "Just snapshot", "EC2 + AMI", "EC2 + AMI + snapshot"], answer: 3, explain: "AMI copy creates the AMI and underlying snapshot. Launching creates the EC2 instance." },
      { cat: "design-performant", q: "API Gateway stateless vs stateful APIs?", options: ["Both RESTful are stateful", "REST stateless, WebSocket stateful", "Both are stateless", "Both are stateful"], answer: 1, explain: "RESTful APIs are stateless. WebSocket APIs are stateful with full-duplex communication." },
      { cat: "design-performant", q: "EBS volume types that CANNOT be boot volumes?", options: ["gp2 and io1", "st1 and sc1", "gp3 and io2", "All can be boot"], answer: 1, explain: "HDD types (st1 Throughput Optimized, sc1 Cold HDD) cannot be used as boot volumes." },
      { cat: "design-performant", q: "Migrate SQL Server T-SQL to Aurora PostgreSQL with minimal refactoring?", options: ["AWS DMS only", "Babelfish for Aurora PostgreSQL + SCT/DMS", "FSx for Windows", "Manual query rewrite"], answer: 1, explain: "Babelfish enables Aurora PostgreSQL to understand T-SQL. SCT converts schema, DMS migrates data." },
      { cat: "design-performant", q: "In-memory leaderboard for gaming - which services?", options: ["DynamoDB only", "ElastiCache Redis or DynamoDB with DAX", "RDS Aurora", "Neptune"], answer: 1, explain: "ElastiCache Redis provides in-memory data store. DAX provides in-memory caching for DynamoDB." },
      { cat: "design-performant", q: "SQL-based ML in data warehouse without Python?", options: ["Athena ML", "Redshift ML", "RDS ML", "SageMaker only"], answer: 1, explain: "Amazon Redshift ML allows creating, training, and deploying ML models using SQL." },
      { cat: "design-performant", q: "Long-running container tasks with serverless compute?", options: ["Lambda", "ECS with Fargate", "EC2 only", "Lightsail"], answer: 1, explain: "ECS with Fargate provides serverless container compute without managing infrastructure." },
      { cat: "design-performant", q: "Dedicated encrypted low-latency high-throughput connection to AWS?", options: ["Site-to-Site VPN", "Direct Connect + VPN", "Transit Gateway only", "Direct Connect only"], answer: 1, explain: "Direct Connect provides dedicated low-latency connection. Adding VPN provides encryption." },

      // Design Cost-Optimized Architectures
      { cat: "design-cost", q: "Access S3 from Lambda in Account A to EFS in Account B privately?", options: ["S3 bucket in partner account", "EFS resource policy + VPC peering/endpoint", "Lambda layer", "Proxy Lambda"], answer: 1, explain: "EFS resource policies allow cross-account access. Mount via shared VPC or peered VPC." },
      { cat: "design-cost", q: "S3 invalid lifecycle transitions?", options: ["Standard to Intelligent-Tiering", "Intelligent-Tiering to Standard", "Standard-IA to One Zone-IA", "Standard to Glacier"], answer: 1, explain: "Cannot transition TO Standard or Reduced Redundancy. Cannot go from One Zone-IA to Standard-IA." },
      { cat: "design-cost", q: "Re-creatable assets accessed occasionally after first week?", options: ["S3 Standard", "S3 One Zone-IA after 30 days", "S3 Standard-IA after 7 days", "Glacier immediately"], answer: 1, explain: "One Zone-IA is 20% cheaper than Standard-IA. 30-day minimum before lifecycle transition." },
      { cat: "design-cost", q: "Intermediary query results kept 24 hours, heavily referenced?", options: ["S3 Standard", "S3 Standard-IA", "S3 One Zone-IA", "Glacier Instant Retrieval"], answer: 0, explain: "S3 Standard has no minimum duration charge or retrieval fees - cheapest for short-term, frequently accessed data." },
      { cat: "design-cost", q: "60-minute workflow that can be interrupted - most cost-effective?", options: ["On-Demand EC2", "Spot Instances", "Reserved Instances", "Lambda"], answer: 1, explain: "Spot Instances offer up to 90% discount for fault-tolerant, interruptible workloads." },
      { cat: "design-cost", q: "ECS pricing: EC2 launch type vs Fargate?", options: ["Both by vCPU/memory", "Both by EC2/EBS", "EC2 by resources, Fargate by vCPU/memory", "Fargate free"], answer: 2, explain: "EC2 launch type: pay for EC2/EBS. Fargate: pay for vCPU and memory requested by containers." },
      { cat: "design-cost", q: "Hybrid NFS storage with automated tiering to lower-cost classes?", options: ["EFS with lifecycle", "Storage Gateway File Gateway + S3 lifecycle", "Volume Gateway", "FSx for Windows"], answer: 1, explain: "File Gateway presents NFS interface, stores in S3. S3 lifecycle policies tier to cheaper classes." },
      { cat: "design-cost", q: "1GB file storage cost comparison: S3 vs EFS vs EBS 100GB?", options: ["EBS < S3 < EFS", "S3 < EFS < EBS", "EFS < S3 < EBS", "S3 < EBS < EFS"], answer: 1, explain: "S3: ~$0.023/GB. EFS: ~$0.30/GB. EBS gp2 100GB provisioned: $10/month regardless of usage." },
      { cat: "design-cost", q: "S3TA upload didn't accelerate - what's charged?", options: ["Both S3 and S3TA charges", "Only S3TA charges", "Only S3 charges", "No charges (data in is free)"], answer: 3, explain: "Data transfer IN to S3 is free. S3TA only charges when acceleration occurs." },
      { cat: "design-cost", q: "CloudFront vs direct S3 for static content delivery?", options: ["S3 always cheaper", "CloudFront typically more cost-effective", "Same cost", "CloudFront only for video"], answer: 1, explain: "CloudFront can be more cost-effective due to caching, reduced S3 requests, and lower data transfer rates." },

      // Additional Exam-Level SAA-C03 Questions (Based on Official AWS Exam Guide)
      // Design Secure Architectures - Advanced
      { cat: "design-secure", q: "A company stores sensitive customer data in S3. They need to ensure data cannot be accessed even by AWS personnel. Which encryption should they use?", options: ["SSE-S3", "SSE-KMS with AWS managed key", "SSE-C with customer-provided keys", "SSE-KMS with customer managed CMK stored in CloudHSM"], answer: 3, explain: "SSE-KMS with keys stored in CloudHSM provides exclusive control over encryption keys, preventing even AWS from accessing data." },
      { cat: "design-secure", q: "An application needs to access DynamoDB from within a private subnet without internet access. What should be configured?", options: ["NAT Gateway", "Internet Gateway", "VPC Gateway Endpoint for DynamoDB", "AWS PrivateLink"], answer: 2, explain: "VPC Gateway Endpoints for DynamoDB and S3 provide private connectivity without requiring NAT or internet access." },
      { cat: "design-secure", q: "A company wants to implement defense in depth for their web application. Which combination provides multiple layers of protection?", options: ["Security Groups only", "NACLs only", "WAF + ALB + Security Groups + NACLs", "VPC Flow Logs only"], answer: 2, explain: "Defense in depth uses multiple layers: WAF at edge, ALB with SSL, Security Groups for instances, NACLs for subnets." },
      { cat: "design-secure", q: "How can you ensure that IAM users must use MFA before accessing the AWS Console?", options: ["Enable MFA on root account only", "Create IAM policy with Condition: aws:MultiFactorAuthPresent", "Use AWS Organizations SCP", "Enable in IAM user settings"], answer: 1, explain: "IAM policies with aws:MultiFactorAuthPresent condition key deny access unless the user has authenticated with MFA." },
      { cat: "design-secure", q: "A company needs to rotate database credentials automatically and make them available to applications securely. Which service should they use?", options: ["AWS Systems Manager Parameter Store", "AWS Secrets Manager with automatic rotation", "AWS KMS", "Amazon Cognito"], answer: 1, explain: "Secrets Manager provides automatic rotation of database credentials and integrates with RDS, Redshift, and DocumentDB." },
      { cat: "design-secure", q: "Which service should be used to centrally manage security policies across multiple AWS accounts?", options: ["AWS IAM", "AWS Control Tower", "AWS Organizations with SCPs", "AWS Security Hub"], answer: 2, explain: "AWS Organizations with Service Control Policies (SCPs) centrally manage permissions across all member accounts." },
      { cat: "design-secure", q: "A company needs to detect when AWS API calls are made from unusual locations. Which service provides this capability?", options: ["AWS CloudTrail", "Amazon GuardDuty", "AWS Config", "Amazon Detective"], answer: 1, explain: "GuardDuty uses machine learning to detect unusual API activity including calls from atypical geographic locations." },
      { cat: "design-secure", q: "Which feature ensures that deleted S3 objects can be recovered?", options: ["S3 Object Lock", "S3 Versioning", "S3 Cross-Region Replication", "S3 Lifecycle Policies"], answer: 1, explain: "S3 Versioning keeps multiple versions of objects, allowing recovery of previously deleted or overwritten objects." },
      { cat: "design-secure", q: "A company needs to restrict which AWS services and actions can be used within specific organizational units. What should they implement?", options: ["IAM policies", "Resource-based policies", "Service Control Policies (SCPs)", "Permissions boundaries"], answer: 2, explain: "SCPs are organizational policies that restrict which AWS services and actions are available to accounts in the organization." },

      // Design Resilient Architectures - Advanced
      { cat: "design-resilient", q: "A company needs their RDS database to survive a complete Regional failure. What architecture should they implement?", options: ["RDS Multi-AZ deployment", "RDS Read Replicas in multiple AZs", "RDS with Cross-Region Read Replica and Route 53 failover", "RDS with automated backups"], answer: 2, explain: "Cross-Region Read Replica provides disaster recovery across regions; Route 53 health checks enable automatic failover." },
      { cat: "design-resilient", q: "An application processes messages from SQS but fails occasionally. How can you prevent message loss while handling failures?", options: ["Increase visibility timeout only", "Use dead-letter queue for failed messages", "Delete messages immediately", "Use multiple queues"], answer: 1, explain: "Dead-letter queues capture messages that fail processing after the maximum receive count, preventing data loss." },
      { cat: "design-resilient", q: "A company wants to deploy a highly available application across multiple AZs. The application uses session state. What should they use?", options: ["Store sessions on EC2 instances", "Amazon ElastiCache for session storage", "EBS volumes for session data", "Local file system"], answer: 1, explain: "ElastiCache provides centralized, fast session storage accessible from any instance across AZs." },
      { cat: "design-resilient", q: "What is the MINIMUM number of NAT Gateways needed for a highly available architecture spanning 3 AZs?", options: ["1", "2", "3", "6"], answer: 2, explain: "One NAT Gateway per AZ ensures high availability - if one AZ fails, other AZs maintain internet access." },
      { cat: "design-resilient", q: "A serverless application needs to handle sudden traffic spikes of 10x normal load. Which architecture best handles this?", options: ["Lambda with API Gateway and DynamoDB on-demand", "EC2 with RDS", "ECS with RDS", "Lambda with API Gateway and RDS"], answer: 0, explain: "Lambda, API Gateway, and DynamoDB on-demand all scale automatically to handle traffic spikes without provisioning." },
      { cat: "design-resilient", q: "How can Aurora provide automatic failover with minimal downtime?", options: ["Multi-AZ deployment with standby", "Aurora Replicas with automatic promotion", "Cross-Region replication", "Automated backups"], answer: 1, explain: "Aurora Replicas share the same storage and can be promoted to primary in under 30 seconds during failover." },
      { cat: "design-resilient", q: "A company needs to ensure their application continues running even if an entire AWS Region becomes unavailable. What should they implement?", options: ["Multi-AZ deployment", "Multi-Region active-passive with Route 53 failover", "Auto Scaling across AZs", "ELB health checks"], answer: 1, explain: "Multi-Region deployment with Route 53 failover routing provides disaster recovery against regional failures." },
      { cat: "design-resilient", q: "An event-driven architecture uses Lambda triggered by S3. Lambda sometimes fails. How to ensure all events are eventually processed?", options: ["Increase Lambda timeout", "Enable S3 event destination to SQS as backup", "Use larger Lambda memory", "Create multiple Lambda functions"], answer: 1, explain: "S3 can send failed events to an SQS dead-letter queue, allowing retry of failed Lambda invocations." },
      { cat: "design-resilient", q: "Which service provides a fully managed way to create and run workflows that coordinate multiple AWS services?", options: ["Amazon SQS", "AWS Step Functions", "Amazon EventBridge", "AWS Lambda"], answer: 1, explain: "Step Functions coordinates multiple AWS services into serverless workflows with error handling and retry logic." },

      // Design High-Performing Architectures - Advanced
      { cat: "design-performant", q: "A company needs sub-millisecond read latency for their DynamoDB table. What should they implement?", options: ["DynamoDB Auto Scaling", "DynamoDB Accelerator (DAX)", "DynamoDB Global Tables", "Provisioned capacity"], answer: 1, explain: "DAX is an in-memory cache that provides microsecond read latency for DynamoDB without application changes." },
      { cat: "design-performant", q: "A machine learning workload requires high-throughput shared file storage with POSIX compliance. Which storage should be used?", options: ["Amazon S3", "Amazon EBS", "Amazon FSx for Lustre", "Amazon EFS"], answer: 2, explain: "FSx for Lustre provides high-throughput, POSIX-compliant shared file storage optimized for ML and HPC workloads." },
      { cat: "design-performant", q: "How can you optimize Lambda performance for functions that have cold start issues?", options: ["Increase timeout", "Use Provisioned Concurrency", "Use larger VPC", "Enable X-Ray"], answer: 1, explain: "Provisioned Concurrency keeps function instances warm and ready, eliminating cold starts." },
      { cat: "design-performant", q: "A company needs to stream large amounts of real-time data for analytics. Which service should they use?", options: ["Amazon SQS", "Amazon Kinesis Data Streams", "Amazon SNS", "AWS Batch"], answer: 1, explain: "Kinesis Data Streams is designed for real-time streaming data ingestion at scale with low latency." },
      { cat: "design-performant", q: "What is the maximum IOPS available from a single io2 Block Express EBS volume?", options: ["16,000 IOPS", "64,000 IOPS", "256,000 IOPS", "500,000 IOPS"], answer: 2, explain: "io2 Block Express provides up to 256,000 IOPS per volume for the most demanding I/O-intensive workloads." },
      { cat: "design-performant", q: "A company needs to cache database queries for a MySQL RDS database. Which solution provides the best performance?", options: ["RDS Read Replicas", "Amazon ElastiCache for Redis", "RDS Proxy", "Amazon MemoryDB"], answer: 1, explain: "ElastiCache for Redis provides microsecond latency for cached database queries with rich data structures." },
      { cat: "design-performant", q: "How can you improve the performance of API Gateway for a globally distributed user base?", options: ["Use Regional endpoints", "Enable caching", "Use Edge-optimized endpoints", "Both B and C"], answer: 3, explain: "Edge-optimized endpoints use CloudFront edge locations, and caching reduces backend calls for repeated requests." },
      { cat: "design-performant", q: "A company is running containers that need to access AWS services at high throughput. What should they consider for networking?", options: ["Bridge networking only", "awsvpc network mode with ENI", "Host networking with security groups", "NAT Gateway for all traffic"], answer: 1, explain: "awsvpc network mode provides each task its own ENI with full VPC networking features for high throughput." },
      { cat: "design-performant", q: "Which placement group type provides the lowest network latency between instances?", options: ["Spread placement group", "Partition placement group", "Cluster placement group", "Default placement"], answer: 2, explain: "Cluster placement groups place instances close together in a single AZ for lowest latency networking." },

      // Design Cost-Optimized Architectures - Advanced
      { cat: "design-cost", q: "A company has predictable compute usage but wants flexibility across instance families. What should they purchase?", options: ["Standard Reserved Instances", "Convertible Reserved Instances", "Compute Savings Plans", "EC2 Instance Savings Plans"], answer: 2, explain: "Compute Savings Plans provide flexibility across instance families, sizes, regions, and even Fargate and Lambda." },
      { cat: "design-cost", q: "A company stores 100TB of data accessed once per quarter for compliance. What is the most cost-effective storage?", options: ["S3 Standard", "S3 Glacier Deep Archive", "S3 Standard-IA", "S3 One Zone-IA"], answer: 1, explain: "Glacier Deep Archive is the lowest-cost option at ~$1/TB/month for data accessed infrequently." },
      { cat: "design-cost", q: "How can a company reduce data transfer costs between their VPC and S3?", options: ["Use NAT Gateway", "Use S3 Gateway Endpoint", "Use Transit Gateway", "Use VPN"], answer: 1, explain: "S3 Gateway Endpoints are free and eliminate data transfer charges through NAT Gateway or internet." },
      { cat: "design-cost", q: "A development team runs EC2 instances only during business hours (8am-6pm weekdays). How can they reduce costs?", options: ["Use Reserved Instances", "Use AWS Instance Scheduler to stop/start instances", "Use Spot Instances", "Manually shut down each night"], answer: 1, explain: "AWS Instance Scheduler automates stopping instances outside business hours, reducing costs by ~70%." },
      { cat: "design-cost", q: "Which pricing model offers the biggest discount for fault-tolerant, flexible workloads?", options: ["On-Demand", "Reserved Instances", "Spot Instances", "Dedicated Hosts"], answer: 2, explain: "Spot Instances offer up to 90% discount compared to On-Demand for interruptible workloads." },
      { cat: "design-cost", q: "A company wants to monitor and control their AWS costs across multiple accounts. Which services should they use?", options: ["CloudWatch only", "AWS Budgets and Cost Explorer", "AWS Config only", "CloudTrail only"], answer: 1, explain: "AWS Budgets alerts on spending thresholds; Cost Explorer analyzes and visualizes spending patterns." },
      { cat: "design-cost", q: "How can a company optimize Lambda costs for functions that run frequently with consistent memory usage?", options: ["Use Provisioned Concurrency always", "Right-size memory allocation using Lambda Power Tuning", "Use maximum memory always", "Use minimum memory always"], answer: 1, explain: "Lambda Power Tuning helps find the optimal memory setting that balances cost and performance." },
      { cat: "design-cost", q: "Which S3 storage class automatically optimizes costs based on changing access patterns?", options: ["S3 Standard", "S3 Standard-IA", "S3 Intelligent-Tiering", "S3 Glacier"], answer: 2, explain: "S3 Intelligent-Tiering automatically moves objects between access tiers based on usage patterns." },
      { cat: "design-cost", q: "A company is migrating to AWS and needs to estimate their monthly costs. Which tools should they use?", options: ["AWS Cost Explorer only", "AWS Pricing Calculator", "AWS Trusted Advisor only", "AWS Organizations"], answer: 1, explain: "AWS Pricing Calculator estimates costs before migration based on expected usage and configurations." },

      // Practice Test #1 - Additional 65 Questions
      // Design Resilient Architectures
      { cat: "design-resilient", q: "A healthcare company needs a no-code data preparation tool for Parquet files in S3 with data profiling and recipe sharing. What should they use?", options: ["Amazon Athena SQL queries", "AWS Glue DataBrew with recipes and profiling", "AWS Glue Studio visual ETL", "Amazon AppFlow transformations"], answer: 1, explain: "Glue DataBrew provides visual, no-code data preparation with built-in profiling, reusable recipes, and audit trails perfect for analysts." },
      { cat: "design-resilient", q: "A gaming app needs to process score updates in order with no data loss during traffic spikes. Which solution is best?", options: ["Kinesis Data Streams with Lambda processing to DynamoDB", "EC2 Auto Scaling with SQS to RDS MySQL", "SNS topic with Lambda to SQL on EC2", "Kinesis with EC2 fleet to DynamoDB"], answer: 0, explain: "Kinesis Data Streams with Lambda provides serverless, ordered, real-time processing with DynamoDB for high availability." },
      { cat: "design-resilient", q: "An Auto Scaling group spans 2 AZs. Two instances in AZ-A are terminated, then an instance in AZ-B becomes unhealthy. What happens?", options: ["ASG terminates unhealthy first, launches replacement; rebalances by launching in AZ-A before terminating", "ASG launches in AZ-B first, then terminates", "ASG terminates old instances before launching new ones during rebalancing", "ASG launches and terminates simultaneously"], answer: 0, explain: "ASG first handles unhealthy instance (terminate then launch). For rebalancing, it launches new instances before terminating old ones to maintain availability." },
      { cat: "design-resilient", q: "A company processes 1000 messages/sec via SQS FIFO with strict ordering. What batch size ensures this throughput?", options: ["Default FIFO (300 msg/sec)", "Batch 2 messages per operation", "Batch 4 messages per operation", "Use SQS Standard"], answer: 2, explain: "FIFO queues support 300 msg/sec by default. Batching 10 messages = 3000 msg/sec. Batching 4 = 1200 msg/sec, meeting the 1000 msg/sec requirement." },
      { cat: "design-resilient", q: "A web app needs to handle permit submissions with exactly-once processing and no data loss. Which service guarantees this?", options: ["SQS FIFO queue", "SQS Standard queue", "EventBridge events", "API Gateway with Lambda"], answer: 0, explain: "SQS FIFO provides exactly-once delivery and preserves message order, essential for transactional workflows like form submissions." },
      { cat: "design-resilient", q: "RDS Multi-AZ replication uses which method? Read replicas use which?", options: ["Multi-AZ: sync, Read replica: async", "Multi-AZ: async, Read replica: sync", "Multi-AZ: async, Read replica: async", "Multi-AZ: async across 1 AZ, Read replica: sync"], answer: 0, explain: "Multi-AZ uses synchronous replication to standby in different AZ for failover. Read replicas use asynchronous replication for read scaling." },
      { cat: "design-resilient", q: "How to prevent accidental S3 object deletion for compliance? (2 answers)", options: ["Enable versioning", "Enable MFA delete", "Get managerial approval", "SNS notification after deletion", "Extra confirmation in console"], answer: [0, 1], explain: "Versioning preserves all object versions. MFA delete requires secondary authentication before permanent deletion." },
      { cat: "design-resilient", q: "A carmaker needs serverless ingestion from car sensors to auto-scaled DynamoDB. Which solution has least overhead?", options: ["SQS queue polled by Lambda to DynamoDB", "Kinesis Data Firehose direct to DynamoDB", "SQS with EC2 to DynamoDB", "Kinesis polled by EC2 to DynamoDB"], answer: 0, explain: "SQS with Lambda is fully serverless with automatic scaling. Firehose can't write directly to DynamoDB; EC2 requires manual management." },
      { cat: "design-resilient", q: "A Step Functions workflow must handle 30-min processes after lightweight validation via API Gateway. Which backend is best?", options: ["Lambda validation, ECS Fargate for processing", "Lambda validation, EKS self-managed nodes", "SQS messages, EventBridge validation, Lightsail", "API Gateway, Step Functions validation, EKS Anywhere"], answer: 0, explain: "Lambda handles quick validation; ECS Fargate provides serverless containers for long-running tasks without server management." },
      { cat: "design-resilient", q: "An app accesses RDS MySQL causing peak timeout during high load. How to improve scalability cost-effectively? (2 answers)", options: ["RDS Proxy with EC2 Auto Scaling", "SQS queue with EC2 workers", "ElastiCache for query caching", "API Gateway throttling", "Cross-region read replicas"], answer: [0, 1], explain: "RDS Proxy manages connections and reduces timeouts. SQS decouples load, buffering bursts and scaling workers independently." },
      { cat: "design-resilient", q: "What's the pricing difference between ECS EC2 launch type and Fargate launch type?", options: ["ECS EC2: EC2 + EBS costs; Fargate: vCPU + memory costs", "Both charge for vCPU + memory", "Both charge for EC2 + EBS", "Both charge per hour of ECS usage"], answer: 0, explain: "ECS EC2 launch type charges for underlying EC2 instances/EBS. Fargate charges only for vCPU and memory resources requested." },
      { cat: "design-resilient", q: "A 60-min workflow can be interrupted and restarted. Which compute is most cost-effective?", options: ["Spot Instances", "Lambda functions", "On-Demand instances", "Reserved Instances"], answer: 0, explain: "Spot Instances offer up to 90% discount for interruptible workloads. Lambda has 15-min max limit and costs more for hour-long processes." },

      // Design Secure Architectures
      { cat: "design-secure", q: "Best practices for AWS root user account? (2 answers)", options: ["Strong password", "Enable MFA", "Share access keys with owner", "Encrypt and store keys in S3", "Email credentials to owner"], answer: [0, 1], explain: "Use strong password and enable MFA on root user. Never share root credentials or create access keys unless absolutely necessary." },
      { cat: "design-secure", q: "How to restrict live streaming to only USA users? (2 answers)", options: ["CloudFront geo-restriction (whitelist USA)", "Route 53 geolocation routing to allow only USA", "Route 53 weighted routing", "Route 53 failover routing", "Route 53 latency routing"], answer: [0, 1], explain: "CloudFront geo-restriction blocks/allows by country. Route 53 geolocation routing routes traffic based on user's geographic location." },
      { cat: "design-secure", q: "How to protect S3 data from malicious activity and check EC2 vulnerabilities?", options: ["GuardDuty for S3 threats, Inspector for EC2 vulnerabilities", "Inspector for S3, Inspector for EC2", "GuardDuty for both", "Inspector for S3, GuardDuty for EC2"], answer: 0, explain: "GuardDuty detects threats to S3 data using ML. Inspector performs security assessments to find EC2 vulnerabilities." },
      { cat: "design-secure", q: "EC2 instances in private subnet need internet access for patching. How to set up NAT gateways for high availability?", options: ["2 NAT gateways, one in each public subnet across 2 AZs", "1 NAT gateway in one public subnet", "2 NAT gateways in same public subnet", "2 NAT gateways in private subnets"], answer: 0, explain: "For HA, create NAT gateway in public subnet of each AZ. Instances in private subnets route through NAT in same AZ." },
      { cat: "design-secure", q: "How to grant 50 out of 200 IAM users write access to DynamoDB with least effort?", options: ["Create IAM group, attach policy, add 50 users to group", "Create policy and assign to each of 50 users manually", "Update S3 bucket policy", "Create MFA user linked to 50 IAM users"], answer: 0, explain: "IAM groups simplify permission management. Create group with write policy, add users to group to grant permissions efficiently." },
      { cat: "design-secure", q: "New developers need DynamoDB access but accidentally deleted tables. How to prevent this while allowing controlled access?", options: ["Permissions boundary to limit max permissions developers can grant", "Remove all database access", "Only root user has access", "CTO reviews each permission"], answer: 0, explain: "Permissions boundaries control maximum permissions that can be granted to IAM principals, preventing privilege escalation beyond defined limits." },
      { cat: "design-secure", q: "How to access S3 and DynamoDB from private subnet without internet? What do you create?", options: ["Gateway endpoint for both S3 and DynamoDB", "Gateway endpoint for S3, interface endpoint for DynamoDB", "Interface endpoints for both", "Gateway for DynamoDB, OAI for S3"], answer: 0, explain: "S3 and DynamoDB both support gateway endpoints for private VPC access without internet or NAT gateway charges." },
      { cat: "design-secure", q: "Company uses on-prem AD and wants centralized AWS access with SSO. Which solution has least operational overhead?", options: ["AD Connector with IAM Identity Center using permission sets", "AWS Managed Microsoft AD with trust relationship", "Open-source IdP on EC2 with SAML", "Control Tower with manual IAM role creation"], answer: 0, explain: "AD Connector proxies to on-prem AD (no directory to manage in AWS). IAM Identity Center provides SSO and group-based permission sets." },
      { cat: "design-secure", q: "Company needs private DNS resolution from VPC to on-premises servers over Site-to-Site VPN. What should be configured?", options: ["Route 53 Resolver outbound endpoint with forwarding rules to on-prem DNS", "Route 53 Resolver inbound endpoint with forwarding rules", "Hybrid connectivity gateway", "Route 53 private hosted zone for on-prem domain"], answer: 0, explain: "Outbound endpoint forwards DNS queries from VPC to on-prem DNS servers. Inbound is for opposite direction (on-prem to AWS)." },
      { cat: "design-secure", q: "Research company VPC (no internet) needs private access to partner's RDS in another account. Which solution works?", options: ["Partner creates NLB, exposes via PrivateLink as interface endpoint in research VPC", "VPC peering with Transit Gateway routing", "Enable public access on RDS with security group rules", "Client VPN with Direct Connect"], answer: 0, explain: "PrivateLink with NLB (or RDS Proxy) enables private cross-account access to RDS without internet, VPN, or Direct Connect." },
      { cat: "design-secure", q: "Web app in private VPC needs to resolve on-premises private DNS. Hybrid connectivity via VPN exists. What's needed?", options: ["Route 53 Resolver outbound endpoint forwarding to on-prem DNS", "Route 53 inbound endpoint", "Hybrid connectivity gateway", "Route 53 private hosted zone"], answer: 0, explain: "Outbound endpoint forwards DNS queries for on-prem domains to on-prem DNS servers over VPN." },
      { cat: "design-secure", q: "Which IAM policy allows deleting objects in S3 bucket following least privilege?", options: ["s3:DeleteObject on arn:aws:s3:::bucket/*", "s3:DeleteObject on arn:aws:s3:::bucket*", "s3:*Object on arn:aws:s3:::bucket/*", "s3:* on arn:aws:s3:::bucket/*"], answer: 0, explain: "Correct format: s3:DeleteObject action on bucket/* resource (/* means all objects in bucket). Least privilege grants only delete." },
      { cat: "design-secure", q: "Global app needs cross-account DynamoDB access. Best approach with minimal refactoring?", options: ["Aurora Global Database for users table, Aurora for local tables", "DynamoDB global table for games, DynamoDB for local", "DynamoDB global for games, Aurora for local", "Aurora Global for games, DynamoDB for local"], answer: 0, explain: "Keep existing Aurora infrastructure. Use Aurora Global Database for global table, regular Aurora for region-specific tables." },
      { cat: "design-secure", q: "Different retention periods needed for S3 objects. Which configurations are valid? (2 answers)", options: ["Explicit retention specifies Retain Until Date", "Different versions can have different retention modes", "Bucket default specifies Retain Until Date", "Bucket default overrides explicit retention", "Cannot use bucket default for retention"], answer: [0, 1], explain: "Explicit retention sets Retain Until Date. Different object versions can have different retention settings. Bucket default sets duration, not date." },
      { cat: "design-secure", q: "What access controls limit EC2 instances to EFS file system? (2 answers)", options: ["VPC security groups for network traffic control", "IAM policy to control mount permissions", "Network ACLs at instance level", "IAM root credentials", "GuardDuty for access control"], answer: [0, 1], explain: "VPC security groups control network access to EFS mount targets. IAM policies control which principals can mount the file system." },
      { cat: "design-secure", q: "EKS app needs different Pods to access only their designated AWS services (S3 or DynamoDB). How to enforce least privilege?", options: ["Separate service accounts with IRSA, map to scoped IAM roles per Pod", "Single service account with both S3 and DynamoDB access", "Attach IAM policy to Pods via annotations", "EC2 instance profile with both policies, use K8s RBAC"], answer: 0, explain: "IRSA (IAM Roles for Service Accounts) allows Pod-level IAM roles, enforcing least privilege per service." },
      { cat: "design-secure", q: "Block access from 2 countries, allow from 1 country. Which service?", options: ["WAF on ALB with geo match conditions", "Security group on ALB", "Security group on EC2", "CloudFront geo restriction in VPC"], answer: 0, explain: "WAF geo match conditions allow/block based on country. CloudFront geo restriction also works but isn't in a VPC. Security groups can't filter by geo." },
      { cat: "design-secure", q: "EC2 cryptocurrency mining detected. Which service detects this malicious activity?", options: ["GuardDuty", "Shield Advanced", "WAF", "Firewall Manager"], answer: 0, explain: "GuardDuty uses ML and threat intelligence to detect cryptocurrency mining, unauthorized activity, and malicious behavior." },
      { cat: "design-secure", q: "Sensitive health data backup to S3 must be encrypted. Company wants audit trail of key usage but not manage keys. Which encryption?", options: ["SSE-KMS", "SSE-S3", "SSE-C", "Client-side encryption"], answer: 0, explain: "SSE-KMS provides AWS-managed encryption with audit trail via CloudTrail showing when keys were used and by whom." },
      { cat: "design-secure", q: "On-premises data center needs encrypted low-latency connection to AWS with operational overhead accepted. Which solution?", options: ["Direct Connect plus VPN", "Direct Connect only", "Site-to-Site VPN", "Transit Gateway"], answer: 0, explain: "Direct Connect + VPN provides dedicated low-latency connection with IPsec encryption, combining benefits of both services." },

      // Design High-Performing Architectures
      { cat: "design-performant", q: "Media company needs fast global uploads to S3. Which solutions improve upload speed? (2 answers)", options: ["S3 Transfer Acceleration", "Multipart uploads", "Direct Connect", "Site-to-Site VPN", "Global Accelerator"], answer: [0, 1], explain: "Transfer Acceleration uses CloudFront edge locations for faster uploads. Multipart upload improves throughput by uploading parts in parallel." },
      { cat: "design-performant", q: "2GB compressed file daily upload to S3. Fastest way?", options: ["Multipart upload with S3 Transfer Acceleration", "Single operation upload", "Multipart upload only", "FTP to EC2 then transfer to S3"], answer: 0, explain: "Combining multipart upload (parallel parts) with Transfer Acceleration (edge locations) provides fastest transfer for large files." },
      { cat: "design-performant", q: "Legacy apps need Oracle DB customization and HA. Which RDS option allows OS access?", options: ["RDS Custom for Oracle in multi-AZ", "RDS for Oracle in multi-AZ", "RDS for Oracle with cross-AZ read replicas", "EC2 instances in multi-AZ"], answer: 0, explain: "RDS Custom for Oracle allows OS and DB customization with minimal maintenance. Multi-AZ provides high availability." },
      { cat: "design-performant", q: "HPC application needs low latency, high bandwidth inter-instance communication. Which EC2 topology?", options: ["Cluster placement group", "Partition placement group", "Spread placement group", "Auto Scaling group"], answer: 0, explain: "Cluster placement groups pack instances close together in single AZ for lowest network latency and highest throughput for HPC." },
      { cat: "design-performant", q: "1GB test file upload: S3 TA didn't accelerate transfer. Who pays transfer charges?", options: ["No charges (TA didn't accelerate)", "Only S3 transfer charges", "Only S3 TA charges", "Both S3 and S3 TA charges"], answer: 0, explain: "S3 Transfer Acceleration charges only for accelerated transfers. No charges if transfer isn't accelerated. S3 inbound transfer is free." },
      { cat: "design-performant", q: "API needs content-based routing and high availability across AZs. Which load balancer?", options: ["Application Load Balancer with Auto Scaling", "Network Load Balancer with Private IP", "Auto Scaling with Elastic IP", "Auto Scaling with Public IP"], answer: 0, explain: "ALB provides Layer 7 content-based routing. Multi-AZ deployment with Auto Scaling provides high availability." },
      { cat: "design-performant", q: "On-premises data center Microsoft DFS needs hybrid cloud migration. Which AWS service?", options: ["FSx for Windows File Server", "FSx for Lustre", "AWS Managed Microsoft AD", "Microsoft SQL Server on AWS"], answer: 0, explain: "FSx for Windows File Server supports Microsoft DFS and provides fully managed Windows file storage with SMB protocol." },
      { cat: "design-performant", q: "Global app needs fast regional failover for UDP traffic. Which service?", options: ["Global Accelerator", "CloudFront", "ELB", "Route 53"], answer: 0, explain: "Global Accelerator provides fast regional failover for non-HTTP use cases like UDP, using AWS global network and static anycast IPs." },
      { cat: "design-performant", q: "Which S3 lifecycle transitions are INVALID? (2 answers)", options: ["Intelligent-Tiering to Standard", "One Zone-IA to Standard-IA", "Standard-IA to Intelligent-Tiering", "Standard to Intelligent-Tiering", "Standard-IA to One Zone-IA"], answer: [0, 1], explain: "Cannot transition TO Standard from any class, or FROM One Zone-IA to Standard-IA/Intelligent-Tiering." },
      { cat: "design-performant", q: "Static website on on-prem servers launching in Asia. Backend stays in US. Need low latency for Asian users quickly. What's best?", options: ["CloudFront with on-prem origin", "CloudFront with Route 53 DNS as origin", "Migrate to S3 with cross-region replication", "Route 53 geo-proximity to on-prem"], answer: 0, explain: "CloudFront caches content at edge locations near Asian users, reducing latency without migrating backend from US." },
      { cat: "design-performant", q: "App needs Kinesis-like real-time streaming for analytics. Which solution?", options: ["API Gateway with Kinesis Data Analytics", "API Gateway with Lambda", "Athena with S3", "QuickSight with Redshift"], answer: 0, explain: "API Gateway receives data via REST API. Kinesis Data Analytics processes streaming data in real-time with sub-second latencies." },
      { cat: "design-performant", q: "App needs microsecond latency for leaderboards. Which stores support this? (2 answers)", options: ["ElastiCache for Redis", "DynamoDB with DAX", "Neptune", "DynamoDB alone", "Aurora"], answer: [0, 1], explain: "ElastiCache Redis and DynamoDB DAX both provide sub-millisecond (microsecond) in-memory performance for real-time apps." },
      { cat: "design-performant", q: "AMI created from instance in Region A, copied to Region B, instance created in Region B. What exists in Region B?", options: ["1 EC2, 1 AMI, 1 snapshot", "1 EC2, 1 AMI only", "1 EC2, 1 snapshot only", "1 EC2, 2 AMIs"], answer: 0, explain: "Copying AMI to Region B creates snapshot (AMIs are based on snapshots) and AMI. Then instance created makes 1 EC2, 1 AMI, 1 snapshot." },
      { cat: "design-performant", q: "App needs peak CPU at 50% for performance. How to maintain this automatically?", options: ["Auto Scaling target tracking policy with 50% CPU target", "Auto Scaling step scaling with 50% CPU", "Auto Scaling simple scaling with 50% CPU", "CloudWatch alarm at 50% CPU"], answer: 0, explain: "Target tracking policy automatically adjusts capacity to keep metric (CPU) at/near target value (50%)." },
      { cat: "design-performant", q: "File hosting with 5000+ req/sec causing upload failures. Most cost-optimal solution?", options: ["Create customer-specific prefixes in single bucket", "New bucket per customer", "New bucket per day", "Migrate to EFS"], answer: 0, explain: "S3 supports 5500 GET/3500 PUT per prefix. Creating customer prefixes enables parallel processing, scaling beyond single prefix limits." },
      { cat: "design-performant", q: "EDA app needs fast parallel processing for hot data and low-cost cold data access on S3. Which service?", options: ["FSx for Lustre", "FSx for Windows", "EMR", "Glue"], answer: 0, explain: "FSx for Lustre provides high-performance file system for HPC, transparently integrates with S3 for cold data access." },
      { cat: "design-performant", q: "EC2 instances need high random I/O, data replicated across fleet, resilient architecture. Most cost-optimal storage?", options: ["Instance Store", "EBS", "EFS mount points", "S3"], answer: 0, explain: "Instance Store provides high random I/O included in instance cost, ideal for temporary/replicated data with resilient architecture." },
      { cat: "design-performant", q: "Serverless app must keep all data on-premises but use EKS APIs. Which solution?", options: ["AWS Outposts with EKS Anywhere", "Direct Connect with cloud EKS connected to local cluster", "Snowball Edge with EKS containers", "ECS Fargate in Local Zone"], answer: 0, explain: "Outposts brings AWS services on-premises. EKS Anywhere on Outposts runs Kubernetes locally while using AWS APIs with full data residency." },
      { cat: "design-performant", q: "Data lake needs SQL-based ML model creation without managing infrastructure. Which solution?", options: ["Glue ETL to Redshift Serverless, use Redshift ML", "Glue to RDS PostgreSQL, use Aurora ML", "Glue to Athena tables, use Athena ML", "EMR Spark to Redshift, use SageMaker notebooks"], answer: 0, explain: "Redshift Serverless provides MPP analytics. Redshift ML enables SQL-based model creation/training using SageMaker under the hood, fully serverless." },
      { cat: "design-performant", q: "T-SQL app migrating to Aurora PostgreSQL. Minimize code changes. Which actions? (2 answers)", options: ["Deploy Babelfish for Aurora PostgreSQL", "Use AWS SCT and DMS for schema/data migration", "Custom endpoint emulating SQL Server", "Aurora Global Database", "AWS Glue for query conversion"], answer: [0, 1], explain: "Babelfish allows Aurora PostgreSQL to understand T-SQL. SCT converts schema, DMS migrates data with minimal downtime." },
      { cat: "design-performant", q: "EFS spreadsheet in us-east-1 needs access from other regions. How?", options: ["Inter-region VPC peering to access EFS", "Copy to S3 for global access", "Copy to EFS in other regions", "Move to RDS MySQL"], answer: 0, explain: "EFS is regional but can be accessed from other regions via inter-region VPC peering or Direct Connect/VPN." },
      { cat: "design-performant", q: "Cross-account access to resources. Which method?", options: ["Create IAM role with required permissions, users assume role", "Create IAM users in production, share credentials", "Not possible", "IAM roles and users interchangeable"], answer: 0, explain: "IAM roles with cross-account trust policies allow secure temporary access via AssumeRole without sharing credentials." },
      { cat: "design-performant", q: "API Gateway to serve content from US only (geo-restriction via WAF) but mobile clients need encrypted payment processing and backend validation. Which solution?", options: ["API Gateway REST API with Lambda validation, ECS Fargate backend", "API Gateway with Step Functions validation, EKS self-managed", "SQS with EventBridge validation, Lightsail", "API Gateway, Lambda, EKS Anywhere on-prem"], answer: 0, explain: "API Gateway exposes REST endpoint, Lambda does lightweight validation, ECS Fargate provides serverless managed containers for long-running tasks." },

      // Design Cost-Optimized Architectures
      { cat: "design-cost", q: "Best practices when creating root user? (2 answers)", options: ["Strong password", "Enable MFA", "Create access keys for root", "Encrypt keys in S3", "Email credentials to owner"], answer: [0, 1], explain: "Use strong password and enable MFA. Never create or share root access keys. Don't email credentials." },
      { cat: "design-cost", q: "Best practices for IAM? (2 answers)", options: ["Enable MFA for privileged users", "Configure CloudTrail to log IAM actions", "Use user credentials for EC2", "Min accounts shared", "Grant max privileges"], answer: [0, 1], explain: "Enable MFA for privileged users and use CloudTrail for monitoring/auditing IAM actions." },
      { cat: "design-cost", q: "Audit reports created twice/year, data 100s of TB with millisecond latency. Most cost-effective storage?", options: ["S3 Standard-IA", "S3 Standard", "S3 Intelligent-Tiering", "S3 Glacier Deep Archive"], answer: 0, explain: "S3 Standard-IA is cost-effective for infrequent access (twice/year) but provides millisecond retrieval. Lower storage cost than Standard." },
      { cat: "design-cost", q: "Infrequently accessed EFS data. Most cost-effective?", options: ["Delete old files", "EFS Infrequent Access storage class", "Move to S3 manually", "Smaller instances"], answer: 1, explain: "EFS IA reduces storage costs by 92% for infrequently accessed files while maintaining same performance when accessed." },
      { cat: "design-cost", q: "Re-creatable media assets accessed heavily first week, occasionally after. Most cost-effective?", options: ["S3 One Zone-IA after 30 days", "S3 Standard-IA after 30 days", "S3 Standard-IA after 7 days", "S3 One Zone-IA after 7 days"], answer: 0, explain: "S3 One Zone-IA is 20% cheaper than Standard-IA and suitable for re-creatable data. Min 30-day storage duration required." },
      { cat: "design-cost", q: "Query results kept 24 hours, heavily referenced. Most cost-effective S3 storage?", options: ["S3 Standard", "S3 Standard-IA", "S3 Glacier Instant Retrieval", "S3 One Zone-IA"], answer: 0, explain: "S3 Standard has no minimum duration or retrieval fees. Standard-IA, One Zone-IA, Glacier have 30/90-day minimums and retrieval costs." },
      { cat: "design-cost", q: "Compare 1GB file costs: S3 Standard vs EBS gp2 (100GB provisioned) vs EFS. Correct order?", options: ["S3 < EFS < EBS", "S3 < EBS < EFS", "EBS < S3 < EFS", "EFS < S3 < EBS"], answer: 0, explain: "S3 charges for actual usage ($0.023/GB). EFS charges per GB used ($0.30/GB). EBS charges for provisioned capacity ($10 for 100GB)." },
      { cat: "design-cost", q: "Prevent DynamoDB table deletion during maintenance. Most efficient steps? (2 answers)", options: ["Put instance in Standby state, apply patch, exit Standby", "Suspend ReplaceUnhealthy, patch, set healthy, resume", "Delete ASG, patch, recreate ASG", "Snapshot, new AMI, new instance, manual scaling", "Suspend ScheduledActions, patch, resume"], answer: [0, 1], explain: "Standby state removes from service without termination. Suspending ReplaceUnhealthy prevents replacement of unhealthy instances during maintenance." },
      { cat: "design-cost", q: "Which EBS volume types cannot be boot volumes? (2 answers)", options: ["Throughput Optimized HDD (st1)", "Cold HDD (sc1)", "Provisioned IOPS SSD (io1)", "Instance Store", "General Purpose SSD (gp2)"], answer: [0, 1], explain: "HDD-backed volumes (st1, sc1) cannot be used as boot volumes. Only SSD-backed and Instance Store can be boot volumes." },
      { cat: "design-cost", q: "Unusual API activity detected weekly. Need near-real-time automated alerts. Which solution?", options: ["CloudWatch metric filter on CloudTrail logs for errors, alarm on rate", "CloudTrail to Kinesis, CloudWatch metrics trigger Lambda", "Athena queries on CloudTrail logs in S3, QuickSight reports", "Trusted Advisor CloudWatch metrics for service limit alarms"], answer: 0, explain: "CloudWatch metric filters process CloudTrail API logs, create metrics for error patterns, trigger alarms for anomalies in near-real-time." },
      { cat: "design-cost", q: "API Gateway creates which API types?", options: ["RESTful (stateless), WebSocket (stateful)", "RESTful (stateful), WebSocket (stateless)", "Both stateless", "Both stateful"], answer: 0, explain: "API Gateway RESTful APIs are stateless HTTP-based. WebSocket APIs are stateful for full-duplex real-time communication." },
      { cat: "design-cost", q: "Scheduled scaling for last day of month peak (10 instances needed, normally 2). How to configure ASG?", options: ["Scheduled action, set desired capacity to 10", "Scheduled action, set min=10 and max=10", "Target tracking policy, set count to 10", "Simple tracking policy, set count to 10"], answer: 0, explain: "Scheduled scaling with desired capacity set to 10 scales to exact count needed at scheduled time. Min/max defines range, desired is specific count." },
      { cat: "design-cost", q: "Lambda SNS delivery crossing concurrency quota causing timeouts. What's the issue?", options: ["Lambda account concurrency limit hit, contact AWS support", "SNS scalability limit hit", "Provision more SNS servers", "Provision more Lambda servers"], answer: 0, explain: "Lambda has 1000 concurrent executions per account/region by default. When limit hit, request AWS support to raise account limit." },
      { cat: "design-cost", q: "DynamoDB needs ElastiCache for Redis or Memcached caching. Also SQL queries need caching. Which services? (2 answers)", options: ["ElastiCache", "DynamoDB DAX", "RDS", "OpenSearch", "Redshift"], answer: [0, 1], explain: "ElastiCache (Redis/Memcached) caches SQL queries. DAX caches DynamoDB queries with microsecond latency." },
      { cat: "design-cost", q: "90% read requests for common data. Improve performance most efficiently?", options: ["DynamoDB DAX for DynamoDB, CloudFront for S3", "ElastiCache Redis for DynamoDB, CloudFront for S3", "DAX for DynamoDB, Memcached for S3", "ElastiCache Redis for DynamoDB, Memcached for S3"], answer: 0, explain: "DAX is DynamoDB-native cache with microsecond latency. CloudFront CDN caches S3 static content at edge locations globally." },
      { cat: "design-cost", q: "SNS delivers to 5000 req/sec but failures during peak. How to scale cost-effectively and fault-tolerant?", options: ["Kinesis Data Streams with Lambda to DynamoDB", "SQS with EC2 to RDS", "SNS with Lambda to SQL on EC2", "Kinesis with EC2 to DynamoDB"], answer: 0, explain: "Kinesis ingests high-volume real-time data. Lambda provides serverless processing. DynamoDB offers automatic scaling and high availability." },
      // Practice Test #2 - Additional 65 Questions
      { cat: "design-cost", q: "RDS read replicas data transfer charges across regions?", options: ["No charges for same AZ replication", "No charges for cross-region replication", "Charges for same region replication", "Charges for cross-region replication"], answer: 3, explain: "RDS charges for data transfer when replicating across regions but not within same region. Cross-AZ within same region incurs charges. Same AZ has no replication charges." },
      { cat: "design-performant", q: "EventBridge Scheduler vs EventBridge rules for one-time scheduled tasks?", options: ["Rules - simpler for one-time tasks", "Scheduler - purpose-built for one-time schedules", "Both equivalent", "Neither supports one-time"], answer: 1, explain: "EventBridge Scheduler designed specifically for one-time and complex schedules with better management. EventBridge rules better for recurring patterns and event-driven workflows." },
      { cat: "design-resilient", q: "Aurora Global Database supports how many secondary regions?", options: ["1", "3", "5", "Unlimited"], answer: 2, explain: "Aurora Global Database supports up to 5 secondary AWS regions for disaster recovery and low-latency global reads. Provides < 1 second cross-region replication." },
      { cat: "design-secure", q: "IAM permissions boundary limits?", options: ["Maximum permissions user/role can have", "Minimum permissions required", "Exact permissions granted", "Permissions for boundary itself"], answer: 0, explain: "Permissions boundary sets maximum permissions an identity can have, but doesn't grant permissions itself. Actual permissions are intersection of identity policies and boundary." },
      { cat: "design-secure", q: "Cross-account S3 access - bucket policy vs IAM roles?", options: ["Bucket policy only", "IAM role only", "Either bucket policy or IAM role", "Both required together"], answer: 2, explain: "Can use either bucket policy granting access to external account or IAM role in external account assuming access. Bucket policy simpler for specific resources, IAM roles better for multiple resources." },
      { cat: "design-performant", q: "DataSync locations support?", options: ["Only NFS", "Only SMB", "Only S3", "NFS, SMB, HDFS, S3, EFS, FSx"], answer: 3, explain: "DataSync supports NFS servers, SMB servers, HDFS, Amazon S3, Amazon EFS, Amazon FSx for Windows File Server, Amazon FSx for Lustre, and Amazon FSx for OpenZFS." },
      { cat: "design-performant", q: "AMQP 0-9-1 and 1.0 protocol support in AWS?", options: ["SQS", "SNS", "Amazon MQ", "Kinesis"], answer: 2, explain: "Amazon MQ supports industry-standard messaging protocols including AMQP, MQTT, OpenWire, STOMP. Supports RabbitMQ (AMQP 0-9-1) and ActiveMQ (AMQP 1.0)." },
      { cat: "design-performant", q: "IoT devices sending data, need buffering before processing. Which service?", options: ["Kinesis Data Streams", "SQS", "SNS", "EventBridge"], answer: 0, explain: "Kinesis Data Streams provides real-time buffering and streaming for IoT data with ordering and replay capability. SQS lacks streaming features. SNS is pub/sub without buffering." },
      { cat: "design-resilient", q: "RDS Multi-AZ failover time?", options: ["5 minutes", "60-120 seconds", "Instant", "10-15 minutes"], answer: 1, explain: "RDS Multi-AZ typically fails over in 60-120 seconds automatically. DNS record updated to standby instance. Application reconnects using same endpoint." },
      { cat: "design-resilient", q: "Aurora cluster endpoint types?", options: ["Cluster endpoint only", "Cluster and reader endpoints", "Cluster, reader, and custom endpoints", "Instance endpoints only"], answer: 2, explain: "Aurora provides cluster endpoint (writer), reader endpoint (load-balanced reads), custom endpoints (specific instances), and individual instance endpoints for fine-grained control." },
      { cat: "design-cost", q: "S3 Intelligent-Tiering monitoring fee?", options: ["Per object monitored", "Per GB stored", "Flat monthly fee", "No monitoring fee"], answer: 0, explain: "S3 Intelligent-Tiering charges small per-object monitoring and automation fee plus standard storage rates. Automatically moves objects between access tiers to optimize costs." },
      { cat: "design-performant", q: "CloudFront signed URLs vs signed cookies?", options: ["URLs for individual files, cookies for multiple", "Cookies for individual, URLs for multiple", "Both same functionality", "URLs more secure"], answer: 0, explain: "Signed URLs restrict access to individual files. Signed cookies restrict access to multiple files and don't require URL changes. Both equally secure with different use cases." },
      { cat: "design-resilient", q: "S3 Cross-Region Replication requires?", options: ["Versioning enabled on source only", "Versioning on destination only", "Versioning on both source and destination", "Versioning optional"], answer: 2, explain: "S3 Cross-Region Replication requires versioning enabled on both source and destination buckets. Replicates objects, metadata, and ACLs asynchronously." },
      { cat: "design-performant", q: "EBS volume types with provisioned IOPS?", options: ["io1/io2 only", "gp2/gp3 only", "io1, io2, and gp3", "All EBS types"], answer: 2, explain: "io1/io2 provision specific IOPS independently from size. gp3 allows provisioning IOPS and throughput independently. gp2 ties IOPS to size. HDD types don't support IOPS provisioning." },
      { cat: "design-secure", q: "S3 bucket policy vs ACL for access control?", options: ["Bucket policy preferred for complex rules", "ACL preferred for all cases", "Both equally recommended", "ACLs deprecated"], answer: 0, explain: "Bucket policies provide fine-grained access control with conditions and are AWS recommended. ACLs legacy feature for simple scenarios. Bucket policies support more complex authorization." },
      { cat: "design-performant", q: "Lambda provisioned concurrency vs reserved concurrency?", options: ["Provisioned pre-warms, reserved guarantees capacity", "Both same", "Reserved pre-warms, provisioned guarantees", "Both guarantee only"], answer: 0, explain: "Provisioned concurrency keeps functions initialized and ready (eliminates cold starts). Reserved concurrency guarantees capacity allocation but doesn't pre-warm. Different purposes." },
      { cat: "design-resilient", q: "DynamoDB global tables support how many regions?", options: ["2 regions", "5 regions", "10 regions", "All AWS regions"], answer: 3, explain: "DynamoDB global tables can replicate across all AWS regions where DynamoDB is available. Provides multi-region, multi-active database with automatic replication." },
      { cat: "design-performant", q: "ElastiCache cluster mode enabled vs disabled for Redis?", options: ["Enabled allows partitioning, disabled single node", "Disabled allows partitioning", "Both identical", "Enabled for backups only"], answer: 0, explain: "Cluster mode enabled allows data partitioning across multiple shards for horizontal scaling. Disabled mode uses single primary with replicas for high availability but not partitioning." },
      { cat: "design-cost", q: "S3 Glacier retrieval options fastest to slowest?", options: ["Expedited, Standard, Bulk", "Standard, Expedited, Bulk", "Bulk, Standard, Expedited", "Only Standard available"], answer: 0, explain: "Expedited: 1-5 minutes (most expensive). Standard: 3-5 hours (mid-price). Bulk: 5-12 hours (cheapest). Choose based on urgency and cost requirements." },
      { cat: "design-secure", q: "VPC endpoint types and use cases?", options: ["Interface only", "Gateway only", "Interface for most services, Gateway for S3/DynamoDB", "Gateway for all services"], answer: 2, explain: "Gateway endpoints support S3 and DynamoDB (no charge). Interface endpoints (powered by PrivateLink) support most AWS services with ENI placement (hourly charge plus data transfer)." },
      { cat: "design-resilient", q: "Route 53 routing policy for active-passive failover?", options: ["Simple", "Weighted", "Failover", "Latency"], answer: 2, explain: "Failover routing policy configures active-passive failover with health checks. Routes to primary when healthy, automatically fails over to secondary when primary unhealthy." },
      { cat: "design-performant", q: "API Gateway endpoint types?", options: ["Regional only", "Edge-optimized only", "Regional, Edge-optimized, and Private", "Public and Private only"], answer: 2, explain: "Regional: deployed in specific region. Edge-optimized: uses CloudFront for global access. Private: accessible only from VPC using VPC endpoint. Choose based on access pattern." },
      { cat: "design-secure", q: "Secrets Manager vs Parameter Store for secrets?", options: ["Secrets Manager auto-rotates, Parameter Store cheaper", "Parameter Store auto-rotates", "Both identical", "Parameter Store more secure"], answer: 0, explain: "Secrets Manager provides automatic rotation, cross-account access, fine-grained permissions. Parameter Store cheaper for simple use cases but manual rotation. Choose based on requirements." },
      { cat: "design-resilient", q: "ELB health check interval minimum?", options: ["5 seconds", "10 seconds", "15 seconds", "30 seconds"], answer: 0, explain: "Application Load Balancer and Network Load Balancer support health check intervals from 5-300 seconds. Shorter intervals detect failures faster but increase load on targets." },
      { cat: "design-performant", q: "CloudFront regional edge caches purpose?", options: ["Replace origin", "Cache between edge locations and origin", "Primary cache", "Backup only"], answer: 1, explain: "Regional edge caches sit between CloudFront edge locations and origin, caching less frequently accessed content. Reduces origin load and improves performance for content evicted from edge." },
      { cat: "design-cost", q: "EC2 Spot Instance interruption notice?", options: ["30 seconds", "2 minutes", "5 minutes", "No notice"], answer: 1, explain: "EC2 sends Spot Instance interruption notice 2 minutes before termination. Use CloudWatch Events or instance metadata to detect and gracefully handle interruption." },
      { cat: "design-performant", q: "Transfer Family protocols supported?", options: ["SFTP only", "FTP only", "SFTP, FTPS, and FTP", "SFTP and FTPS only"], answer: 2, explain: "AWS Transfer Family supports SFTP (SSH File Transfer), FTPS (FTP over TLS), and FTP protocols. Integrates with S3 and EFS for managed file transfer workflows." },
      { cat: "design-resilient", q: "Aurora backtrack vs backup restore?", options: ["Backtrack rewinds in-place, restore creates new cluster", "Both create new cluster", "Both in-place", "Backtrack slower"], answer: 0, explain: "Aurora backtrack rewinds database to specific point in time without creating new cluster (minutes). Backup restore creates new cluster from snapshot (longer). Different use cases." },
      { cat: "design-secure", q: "IAM policy evaluation logic?", options: ["Default deny, explicit deny overrides allow", "Default allow", "First match wins", "Random"], answer: 0, explain: "IAM uses default deny. Evaluation: 1) Explicit deny always wins 2) Explicit allow if no deny 3) Default deny if no matching statement. Deny overrides any allow." },
      { cat: "design-performant", q: "DynamoDB adaptive capacity?", options: ["Handles uneven traffic across partitions", "Increases total capacity", "Backup feature", "Encryption feature"], answer: 0, explain: "Adaptive capacity automatically increases throughput capacity for partitions receiving more traffic within table's total provisioned capacity. Handles uneven workloads without throttling." },
      { cat: "design-cost", q: "RDS Reserved Instance payment options?", options: ["All Upfront only", "Partial Upfront only", "All Upfront, Partial Upfront, and No Upfront", "Monthly only"], answer: 2, explain: "RDS Reserved Instances offer All Upfront (largest discount), Partial Upfront (medium discount), and No Upfront (smallest discount) payment options. 1 or 3 year terms." },
      { cat: "design-resilient", q: "Auto Scaling group health check types?", options: ["EC2 only", "ELB only", "EC2 and ELB", "Custom only"], answer: 2, explain: "Auto Scaling supports EC2 health checks (instance status) and ELB health checks (application health). Can use both together. ELB checks more comprehensive for application availability." },
      { cat: "design-performant", q: "Lambda@Edge vs CloudFront Functions?", options: ["Edge for complex logic, Functions for simple", "Both identical", "Functions for complex logic", "Edge deprecated"], answer: 0, explain: "CloudFront Functions: lightweight JavaScript, sub-ms execution, viewer request/response only. Lambda@Edge: full Node.js/Python, longer runtime, all CloudFront events, origin access. Choose by complexity." },
      { cat: "design-secure", q: "S3 Block Public Access levels?", options: ["Bucket level only", "Account level only", "Both bucket and account level", "Object level"], answer: 2, explain: "S3 Block Public Access works at account and bucket levels. Account-level settings override bucket settings. Provides centralized control to prevent public access across all buckets." },
      { cat: "design-resilient", q: "Route 53 health check types?", options: ["Endpoint only", "Calculated only", "Endpoint, Calculated, and CloudWatch alarm", "DNS only"], answer: 2, explain: "Route 53 supports endpoint health checks (HTTP/HTTPS/TCP), calculated health checks (combining multiple checks), and CloudWatch alarm health checks. Enables complex health monitoring." },
      { cat: "design-performant", q: "EFS performance modes?", options: ["General Purpose only", "Max I/O only", "General Purpose and Max I/O", "Provisioned only"], answer: 2, explain: "General Purpose: low latency, up to 7,000 file operations/sec per file system. Max I/O: higher latency but scales to 500,000+ operations/sec. Choose based on workload." },
      { cat: "design-cost", q: "S3 storage class for unknown access patterns?", options: ["Standard", "Intelligent-Tiering", "One Zone-IA", "Glacier"], answer: 1, explain: "S3 Intelligent-Tiering automatically moves objects between access tiers based on access patterns. No retrieval fees. Ideal when access patterns unknown or changing. Small monitoring fee per object." },
      { cat: "design-performant", q: "DynamoDB WCU calculation?", options: ["1 KB per WCU", "4 KB per WCU", "Unlimited", "1 MB per WCU"], answer: 0, explain: "1 WCU = 1 write/sec for item up to 1 KB. Items larger consume more WCUs (2 KB = 2 WCU). Round up fractional KB. Transactional writes consume 2x WCUs." },
      { cat: "design-resilient", q: "Multi-region application database replication strategy for disaster recovery?", options: ["RDS cross-region read replica", "Aurora Global Database", "DynamoDB global tables", "All depending on requirements"], answer: 3, explain: "RDS read replica: async replication, manual promotion. Aurora Global: < 1s replication, fast failover. DynamoDB global: multi-active, automatic replication. Choose based on RTO/RPO, cost, database type." },
      { cat: "design-secure", q: "AWS Organizations SCP inheritance?", options: ["Child OUs inherit parent SCPs", "No inheritance", "Explicit attachment only", "Root only"], answer: 0, explain: "SCPs inherit down organizational tree. Account's effective permissions are intersection of all SCPs from root to account plus IAM policies. Root OU SCP affects all accounts." },
      { cat: "design-performant", q: "Direct Connect vs VPN throughput?", options: ["Direct Connect: 50Mbps-100Gbps, VPN: up to 1.25Gbps per tunnel", "Both same", "VPN faster", "Direct Connect: 1Gbps max"], answer: 0, explain: "Direct Connect: dedicated connection 50Mbps-100Gbps with consistent performance. VPN: up to 1.25Gbps per tunnel over internet with variable performance. DX for high throughput/consistency." },
      { cat: "design-cost", q: "NAT Gateway vs NAT Instance cost?", options: ["Gateway cheaper", "Instance cheaper for low traffic", "Both same", "Gateway free"], answer: 1, explain: "NAT Gateway: hourly charge plus data processing. NAT Instance: EC2 costs only. For very low traffic, instance might be cheaper. Gateway eliminates management overhead and provides better availability." },
      { cat: "design-resilient", q: "S3 versioning suspension vs disabling?", options: ["Can suspend but not disable once enabled", "Can disable", "No difference", "Must delete bucket to disable"], answer: 0, explain: "Once S3 versioning enabled, you can only suspend (new objects get null version ID) but cannot disable. Existing versions retained. Suspension stops creating new versions." },
      { cat: "design-performant", q: "ElastiCache for Redis replication lag monitoring?", options: ["CloudWatch ReplicationLag metric", "Manual calculation", "Not available", "Logs only"], answer: 0, explain: "CloudWatch ReplicationLag metric measures seconds primary ahead of replica. Monitor to ensure replicas stay current. High lag indicates performance issues or heavy write load." },
      { cat: "design-secure", q: "KMS customer managed key vs AWS managed key?", options: ["Customer managed allows rotation control and key policy", "AWS managed more secure", "Both identical", "AWS managed allows rotation control"], answer: 0, explain: "Customer managed: full control over key policies, rotation, grants, and audit. AWS managed: AWS controls policies and automatic rotation. Customer managed for compliance/custom requirements." },
      { cat: "design-resilient", q: "RDS automated backup retention period?", options: ["0-7 days", "1-35 days", "1-7 days", "0-35 days"], answer: 3, explain: "RDS automated backups can be retained 0-35 days. 0 disables automated backups. Point-in-time recovery available within retention period. Manual snapshots kept until explicitly deleted." },
      { cat: "design-performant", q: "CloudWatch Logs retention?", options: ["7 days default", "30 days default", "Never expire by default", "1 year default"], answer: 2, explain: "CloudWatch Logs never expire by default and retained indefinitely. Set retention policy per log group: 1 day to 10 years or indefinite. Balance cost vs compliance requirements." },
      { cat: "design-cost", q: "EC2 Savings Plans vs Reserved Instances flexibility?", options: ["Savings Plans more flexible (instance family, region, OS)", "RIs more flexible", "Both same", "Neither flexible"], answer: 0, explain: "Savings Plans: commitment to compute usage ($/hour), flexible across instance families, sizes, regions, OS, tenancy. RIs: specific instance type in specific region. Savings Plans easier management." },
      { cat: "design-resilient", q: "Application Load Balancer cross-zone load balancing?", options: ["Enabled by default, no charge", "Disabled by default", "Enabled, extra charge", "Not supported"], answer: 0, explain: "ALB cross-zone load balancing enabled by default at no additional charge. Distributes traffic evenly across all registered targets in all enabled AZs. NLB charges for cross-zone." },
      { cat: "design-performant", q: "S3 Transfer Acceleration vs CloudFront?", options: ["Transfer Acceleration for uploads, CloudFront for downloads", "Both for uploads only", "CloudFront for uploads", "Both identical"], answer: 0, explain: "S3 Transfer Acceleration optimizes uploads to S3 over long distances using CloudFront edge locations. CloudFront optimizes downloads/content delivery. Different use cases and pricing." },
      { cat: "design-secure", q: "WAF rate-based rule vs regular rule?", options: ["Rate-based counts requests per IP, regular pattern-based", "Both same", "Regular counts requests", "Rate-based slower"], answer: 0, explain: "Rate-based rules count requests from IP addresses over time window (5 min) and block when threshold exceeded. Regular rules match patterns. Rate rules prevent DDoS/brute force." },
      { cat: "design-resilient", q: "Aurora read replica lag metric?", options: ["AuroraReplicaLag in milliseconds", "ReplicationLag in seconds", "No metric available", "Manual only"], answer: 0, explain: "Aurora provides AuroraReplicaLag metric in milliseconds via CloudWatch. Typically < 100ms. Much lower than RDS cross-region read replica lag due to shared storage architecture." },
      { cat: "design-performant", q: "Step Functions Standard vs Express workflows?", options: ["Standard long-running, Express high-volume short", "Express long-running", "Both identical", "Standard deprecated"], answer: 0, explain: "Standard: up to 1 year execution, exactly-once, auditable. Express: up to 5 minutes, at-least-once, high throughput (100k+/sec), lower cost. Choose based on duration/volume." },
      { cat: "design-cost", q: "RDS storage autoscaling trigger?", options: ["Less than 10% free space", "Manually only", "Fixed schedule", "Random"], answer: 0, explain: "RDS storage autoscaling triggers when: less than 10% free space, low-storage condition lasts 5+ minutes, and 6+ hours since last modification. Scales up to configured maximum." },
      { cat: "design-resilient", q: "Global Accelerator vs Route 53 latency routing?", options: ["Accelerator uses AWS network, Route 53 uses internet", "Both use internet only", "Both use AWS network", "Route 53 uses AWS network"], answer: 0, explain: "Global Accelerator routes traffic through AWS global network from edge locations (lower latency/jitter). Route 53 latency routing uses DNS to direct to lowest latency region but traffic over internet." },
      { cat: "design-secure", q: "Cognito User Pools vs Identity Pools?", options: ["User Pools for authentication, Identity Pools for authorization/AWS access", "Both for authentication", "Both for AWS access", "Identity Pools deprecated"], answer: 0, explain: "User Pools: user directory, authentication, sign-up/sign-in. Identity Pools (Federated Identities): temporary AWS credentials for authenticated/anonymous users. Often used together." },
      { cat: "design-performant", q: "DynamoDB strongly consistent vs eventually consistent reads?", options: ["Strongly consistent returns latest data, eventual may be stale", "Both identical", "Eventual more consistent", "Strongly consistent faster"], answer: 0, explain: "Strongly consistent reads return most up-to-date data (higher latency, 2x RCU cost). Eventually consistent reads may return stale data (lower latency, standard RCU cost). Default eventual." },
      { cat: "design-cost", q: "S3 requester pays bucket purpose?", options: ["Requester pays data transfer and request costs", "Requester pays storage", "Bucket owner pays all", "Equal split"], answer: 0, explain: "Requester Pays buckets transfer request and data download costs to requester. Bucket owner pays storage. Useful for sharing large datasets where access costs should be borne by users." },
      { cat: "design-resilient", q: "EBS snapshot incremental vs full?", options: ["All snapshots incremental after first", "All full", "Manual choice", "Random"], answer: 0, explain: "First EBS snapshot is full copy. Subsequent snapshots incremental (only changed blocks). But each snapshot complete restore point. Incremental saves storage costs and time." },
      { cat: "design-performant", q: "CloudWatch detailed monitoring interval?", options: ["1 minute", "5 minutes", "1 second", "10 minutes"], answer: 0, explain: "CloudWatch detailed monitoring provides 1-minute metric intervals (extra cost). Basic monitoring provides 5-minute intervals (free for most services). Choose based on monitoring granularity needs." },
      { cat: "design-secure", q: "VPC Flow Logs capture levels?", options: ["VPC, Subnet, and ENI level", "VPC only", "Subnet only", "Instance only"], answer: 0, explain: "VPC Flow Logs can be enabled at VPC level (all ENIs), subnet level (all ENIs in subnet), or ENI level (specific network interface). Logs published to CloudWatch Logs or S3." },
      { cat: "design-resilient", q: "RDS Multi-AZ deployment synchronous vs asynchronous replication?", options: ["Synchronous to standby", "Asynchronous", "No replication", "Manual replication"], answer: 0, explain: "RDS Multi-AZ uses synchronous replication to standby instance in different AZ. Writes acknowledged only after committed to both primary and standby. Ensures zero data loss during failover." },
      { cat: "design-performant", q: "ElastiCache for Memcached vs Redis clustering?", options: ["Memcached supports auto-discovery, Redis cluster mode partitions", "Both identical", "Neither clusters", "Redis simpler"], answer: 0, explain: "Memcached: multi-threaded, auto-discovery for node additions/removals, horizontal scaling. Redis: single-threaded per shard, cluster mode enables partitioning, more features (persistence, pub/sub). Different architectures." },
      { cat: "design-cost", q: "Data transfer costs within same AZ?", options: ["Free for private IP", "Always charged", "Free for public IP", "Charged for both"], answer: 0, explain: "Data transfer within same AZ using private IP addresses is free. Using public/Elastic IPs charged at regional data transfer rates even within same AZ. Use private IPs to minimize costs." },
      { cat: "design-secure", q: "S3 object lock retention modes?", options: ["Governance and Compliance", "Compliance only", "Governance only", "Archive only"], answer: 0, explain: "Governance mode: users with special permissions can override/delete. Compliance mode: no user (including root) can override or delete during retention period. Use compliance for strict regulatory requirements." },
      { cat: "design-resilient", q: "Route 53 alias record vs CNAME?", options: ["Alias free, works at zone apex, CNAME has queries charged and no zone apex", "Both same cost", "CNAME free", "Both support zone apex"], answer: 0, explain: "Alias records: free queries, work at zone apex (example.com), only for AWS resources. CNAME: charged queries, cannot use at zone apex, works for any domain. Prefer alias for AWS resources." },
      // Practice Test #3 - Additional 65 Questions
      { cat: "design-performant", q: "Global Accelerator vs S3 Transfer Acceleration?", options: ["Global Accelerator for TCP/UDP applications, Transfer Acceleration for S3 uploads only", "Both for S3 only", "Transfer Acceleration for all apps", "Both identical"], answer: 0, explain: "Global Accelerator uses AWS global network for TCP/UDP traffic to applications (ALB, NLB, EC2). S3 Transfer Acceleration specifically optimizes uploads to S3 buckets using edge locations." },
      { cat: "design-secure", q: "Copying AMI across regions - what gets copied?", options: ["Snapshot only", "AMI metadata only", "AMI metadata and underlying snapshots", "Instance only"], answer: 2, explain: "Copying AMI to another region copies both AMI metadata and underlying EBS snapshots. Results in independent AMI in target region with own snapshot IDs. Enables multi-region deployments." },
      { cat: "design-secure", q: "Sharing AMI with specific AWS accounts?", options: ["Make AMI public", "Modify AMI permissions to add AWS account IDs", "Cannot share AMIs", "Copy AMI to their account"], answer: 1, explain: "Modify AMI permissions to add specific AWS account IDs for private sharing. Accounts can launch instances from shared AMI. Public sharing makes AMI available to all AWS accounts." },
      { cat: "design-performant", q: "EBS volume types - which for throughput-intensive big data workloads?", options: ["gp3 General Purpose SSD", "io2 Provisioned IOPS SSD", "st1 Throughput Optimized HDD", "sc1 Cold HDD"], answer: 2, explain: "st1 Throughput Optimized HDD designed for frequently accessed, throughput-intensive workloads (big data, data warehouses, log processing). Low cost per GB with high throughput. Cannot be boot volume." },
      { cat: "design-performant", q: "DataSync vs Storage Gateway for migrating NFS data to AWS?", options: ["DataSync for one-time migrations, Storage Gateway for hybrid ongoing access", "Storage Gateway for migrations", "Both identical", "DataSync for hybrid only"], answer: 0, explain: "DataSync optimized for one-time data migrations and periodic data synchronization with automated transfers. Storage Gateway provides ongoing hybrid cloud storage access with caching. Different use cases." },
      { cat: "design-performant", q: "CloudFront with S3 bucket as origin - security best practice?", options: ["Public bucket access", "Origin Access Identity (OAI) restricts S3 to CloudFront only", "Signed URLs on S3", "No security needed"], answer: 1, explain: "Origin Access Identity (OAI) or Origin Access Control (OAC) restricts S3 bucket access to CloudFront only. S3 bucket can remain private. CloudFront serves content while S3 stays secure." },
      { cat: "design-performant", q: "Systems Manager Session Manager vs SSH for EC2 access?", options: ["Session Manager provides browser-based shell without managing SSH keys/bastion hosts", "SSH more secure", "Both require keys", "Session Manager requires bastion"], answer: 0, explain: "Session Manager provides secure browser-based shell access without SSH keys, bastion hosts, or open inbound ports. Uses IAM for access control. Logs sessions to CloudTrail/CloudWatch. SSH requires key management." },
      { cat: "design-resilient", q: "RDS read replicas - replication method?", options: ["Synchronous", "Asynchronous", "No replication", "Manual only"], answer: 1, explain: "RDS read replicas use asynchronous replication. May have replication lag. Used for read scaling and cross-region disaster recovery. Contrast with Multi-AZ synchronous replication for high availability." },
      { cat: "design-performant", q: "Volume Gateway cached vs stored mode?", options: ["Cached keeps frequently accessed data locally, Stored keeps all data locally", "Both keep all data locally", "Cached keeps all data locally", "Stored is cloud-only"], answer: 0, explain: "Cached Volume Gateway keeps frequently accessed data locally, full dataset in S3. Stored Volume Gateway keeps entire dataset locally, async backup to S3. Choose based on latency requirements and local storage capacity." },
      { cat: "design-resilient", q: "Transit Gateway vs VPC Peering for connecting multiple VPCs?", options: ["Transit Gateway hub-and-spoke simplifies management, Peering is mesh", "Peering is hub-and-spoke", "Both identical", "Peering scales better"], answer: 0, explain: "Transit Gateway provides hub-and-spoke topology, scales to thousands of VPCs, supports on-premises connectivity. VPC Peering is 1-to-1 connection, requires full mesh for many VPCs, complex at scale." },
      { cat: "design-performant", q: "FSx for Lustre vs FSx for Windows File Server?", options: ["Lustre for HPC/ML workloads, Windows for Windows applications", "Both for Windows only", "Lustre for Windows apps", "Both identical"], answer: 0, explain: "FSx for Lustre: high-performance file system for compute-intensive workloads (HPC, ML, media processing), integrates with S3. FSx for Windows: fully managed Windows native file system with SMB, AD integration." },
      { cat: "design-resilient", q: "RDS Multi-AZ - how many standby instances?", options: ["1 standby in different AZ", "2 standbys", "3 standbys", "Configurable"], answer: 0, explain: "RDS Multi-AZ provides 1 synchronous standby instance in different AZ. Automatic failover to standby if primary fails. For multiple read replicas use Read Replicas feature (different from Multi-AZ)." },
      { cat: "design-performant", q: "AWS Schema Conversion Tool (SCT) purpose?", options: ["Convert database schema from one engine to another", "Backup databases", "Monitor databases", "Scale databases"], answer: 0, explain: "AWS SCT converts database schemas from one database engine to another (e.g., Oracle to Aurora, SQL Server to PostgreSQL). Handles schema, code, and applications. Works with AWS DMS for data migration." },
      { cat: "design-cost", q: "NAT Gateway vs NAT Instance - High Availability?", options: ["NAT Gateway automatically highly available within AZ", "NAT Instance automatically HA", "Both require manual HA setup", "Neither supports HA"], answer: 0, explain: "NAT Gateway automatically highly available within single AZ, AWS-managed. For multi-AZ HA deploy NAT Gateway per AZ. NAT Instance requires manual HA configuration with scripting, monitoring, failover." },
      { cat: "design-cost", q: "S3 costs - which operation incurs charges? (2 answers)", options: ["PUT requests", "GET requests", "DELETE requests", "Data transfer out to internet", "Data transfer from S3 to EC2 same region"], answer: [0, 1, 3], explain: "S3 charges for: storage, PUT/COPY/POST/LIST requests, GET/SELECT requests, data transfer out to internet. Free: data transfer in, data transfer to EC2 same region, DELETE/CANCEL requests." },
      { cat: "design-performant", q: "ElastiCache Redis vs Memcached - which supports persistence?", options: ["Redis supports persistence, Memcached doesn't", "Memcached supports persistence", "Both support persistence", "Neither supports persistence"], answer: 0, explain: "Redis supports persistence (snapshots and AOF), data structures, pub/sub, replication, transactions, clustering. Memcached is pure in-memory cache, no persistence, simpler, multi-threaded. Choose based on requirements." },
      { cat: "design-secure", q: "Security group vs NACL - statefulness?", options: ["Security groups stateful, NACLs stateless", "Both stateful", "Both stateless", "NACLs stateful"], answer: 0, explain: "Security groups are stateful - return traffic automatically allowed regardless of rules. NACLs are stateless - must explicitly allow both inbound and outbound rules for traffic flow." },
      { cat: "design-resilient", q: "ELB health check - when is instance marked unhealthy?", options: ["After consecutive failed checks reach unhealthy threshold", "First failed check", "Never marked unhealthy", "Manual only"], answer: 0, explain: "ELB marks instance unhealthy after consecutive failed health checks reach configured unhealthy threshold (2-10 checks). Stops sending traffic to unhealthy instances. Marks healthy after consecutive successful checks reach healthy threshold." },
      { cat: "design-performant", q: "Lambda execution time limit?", options: ["15 minutes maximum", "5 minutes", "1 hour", "Unlimited"], answer: 0, explain: "Lambda function execution timeout maximum is 15 minutes (900 seconds). Default is 3 seconds. Configure timeout based on function needs. For longer processing use Step Functions, Fargate, or EC2." },
      { cat: "design-cost", q: "EC2 instance purchasing options - lowest cost for batch processing flexible on timing?", options: ["Spot Instances", "Reserved Instances", "On-Demand", "Dedicated Hosts"], answer: 0, explain: "Spot Instances offer up to 90% discount for interruptible workloads. Perfect for flexible batch processing, data analysis, testing. Can handle 2-minute termination notice. Cheapest option for fault-tolerant workloads." },
      { cat: "design-secure", q: "S3 encryption at rest options? (3 answers)", options: ["SSE-S3 (S3-managed keys)", "SSE-KMS (KMS-managed keys)", "SSE-C (customer-provided keys)", "CloudFront encryption", "Route 53 encryption"], answer: [0, 1, 2], explain: "S3 supports SSE-S3 (S3-managed AES-256), SSE-KMS (KMS keys with audit trail), and SSE-C (customer-provided keys). Also supports client-side encryption. Choose based on compliance and key management requirements." },
      { cat: "design-resilient", q: "Aurora Auto Scaling for read replicas - based on what metrics?", options: ["CPU, connections, custom CloudWatch metrics", "Manual only", "Storage only", "Fixed schedule"], answer: 0, explain: "Aurora Auto Scaling dynamically adjusts read replica count based on CPU utilization, database connections, or custom CloudWatch metrics. Automatically adds/removes replicas based on configured policies. Handles traffic spikes." },
      { cat: "design-performant", q: "API Gateway caching - where is cache located?", options: ["API Gateway cache at edge locations", "API Gateway regional cache", "Lambda cache", "No caching support"], answer: 1, explain: "API Gateway caching stores responses at regional API Gateway cache (not edge locations). Reduces backend calls, improves latency. Configure TTL and cache size. CloudFront can be added for edge caching." },
      { cat: "design-secure", q: "IAM role vs IAM user for EC2 instance?", options: ["Role provides temporary credentials, more secure than user", "User more secure", "Both identical", "Neither recommended"], answer: 0, explain: "IAM roles provide temporary credentials that rotate automatically. No long-term credentials stored on instance. More secure than IAM user access keys. AWS best practice for EC2, Lambda, ECS, etc." },
      { cat: "design-resilient", q: "DynamoDB point-in-time recovery (PITR) - recovery window?", options: ["Last 35 days", "Last 7 days", "Last 24 hours", "Indefinite"], answer: 0, explain: "DynamoDB point-in-time recovery allows restore to any second in last 35 days. Continuous backups. Restore to new table. Enable PITR for production tables. Protects against accidental writes/deletes." },
      { cat: "design-performant", q: "CloudWatch vs CloudTrail - primary use case?", options: ["CloudWatch monitors performance, CloudTrail audits API calls", "Both monitor performance", "Both audit APIs", "CloudWatch audits APIs"], answer: 0, explain: "CloudWatch monitors resource performance metrics, logs, alarms, dashboards. CloudTrail logs AWS API calls for governance, compliance, auditing. Different purposes. Use both for comprehensive monitoring and security." },
      { cat: "design-cost", q: "S3 lifecycle policy - minimum days before transitioning to Glacier?", options: ["30 days in S3 Standard", "0 days (immediate)", "90 days", "1 day"], answer: 0, explain: "S3 Standard to Glacier requires minimum 30 days. S3 lifecycle policies enforce minimum storage durations. Objects must remain in S3 Standard 30 days before transitioning to Glacier or Glacier Deep Archive." },
      { cat: "design-resilient", q: "Auto Scaling - difference between target tracking and step scaling?", options: ["Target tracking maintains metric at target, step scaling uses alarms with step adjustments", "Both identical", "Step tracking is automatic", "Target uses alarms"], answer: 0, explain: "Target tracking automatically adjusts capacity to maintain specified metric (e.g., 50% CPU). Simple to configure. Step scaling uses CloudWatch alarms with multiple step adjustments based on breach size. More control but complex." },
      { cat: "design-performant", q: "Direct Connect vs VPN - latency and bandwidth?", options: ["Direct Connect lower latency and higher bandwidth, VPN over internet", "VPN lower latency", "Both identical", "VPN higher bandwidth"], answer: 0, explain: "Direct Connect: dedicated private connection, consistent low latency, 50Mbps-100Gbps bandwidth. VPN: encrypted over internet, variable latency, up to 1.25Gbps per tunnel. DX for production, VPN for backup/dev." },
      { cat: "design-secure", q: "GuardDuty - what does it do?", options: ["Intelligent threat detection using ML", "Firewall service", "Encryption service", "Backup service"], answer: 0, explain: "GuardDuty is intelligent threat detection service using ML to analyze VPC Flow Logs, CloudTrail events, DNS logs. Detects malicious activity, unauthorized behavior, compromised instances. Continuous monitoring." },
      { cat: "design-resilient", q: "S3 versioning - how to restore deleted object?", options: ["Delete the delete marker", "Restore from backup", "Cannot restore", "Recover from Glacier"], answer: 0, explain: "With versioning enabled, deleting object creates delete marker (doesn't permanently delete). Remove delete marker to restore object. All versions preserved unless explicitly deleted with version ID." },
      { cat: "design-performant", q: "Kinesis Data Streams vs Kinesis Data Firehose - which for real-time analytics?", options: ["Data Streams for custom real-time processing, Firehose for delivery to destinations", "Firehose for real-time processing", "Both identical", "Neither supports real-time"], answer: 0, explain: "Data Streams: real-time streaming with custom processing (Lambda, KCL apps), manual scaling, data retention 1-365 days. Firehose: managed delivery to S3/Redshift/OpenSearch/Splunk, automatic scaling, near real-time." },
      { cat: "design-cost", q: "Reserved Instances - can they be sold?", options: ["Yes, in Reserved Instance Marketplace", "No, cannot be sold", "Only to AWS", "Only within organization"], answer: 0, explain: "Standard Reserved Instances can be sold in RI Marketplace if owned for 30+ days. Allows recouping costs if needs change. Buyer gets remaining term at discount. AWS facilitates transaction." },
      { cat: "design-secure", q: "AWS Config - primary purpose?", options: ["Track resource configurations and changes over time", "Monitor performance", "Backup resources", "Deploy resources"], answer: 0, explain: "AWS Config records resource configurations and changes over time. Evaluate compliance against desired configurations. View configuration history. Integrates with CloudTrail for change tracking. Essential for governance and compliance." },
      { cat: "design-resilient", q: "RDS read replica promotion - what happens?", options: ["Replica becomes standalone DB, replication stops", "Replica deleted", "Cannot promote", "Automatic failover"], answer: 0, explain: "Promoting read replica makes it standalone independent RDS instance. Replication from source stops. Useful for disaster recovery. Original source DB unaffected. Cannot revert promotion." },
      { cat: "design-performant", q: "EBS gp3 vs gp2 - key difference?", options: ["gp3 allows independent IOPS and throughput provisioning, gp2 ties to size", "Both identical", "gp2 allows independent provisioning", "gp3 deprecated"], answer: 0, explain: "gp3: provision IOPS (3,000-16,000) and throughput (125-1,000 MB/s) independently from size. 20% cheaper baseline. gp2: IOPS tied to size (3 IOPS/GB). gp3 better price/performance for most workloads." },
      { cat: "design-secure", q: "AWS Shield Standard vs Advanced?", options: ["Standard free DDoS protection, Advanced includes DDoS Response Team and cost protection", "Both free", "Standard is paid", "Both identical"], answer: 0, explain: "Shield Standard: free automatic DDoS protection for all AWS customers (network/transport layer). Shield Advanced: $3,000/month, includes DDoS Response Team (DRT), cost protection, advanced detection, WAF integration." },
      { cat: "design-resilient", q: "Multi-region deployment - best database choice for active-active?", options: ["DynamoDB Global Tables", "RDS Multi-AZ", "Aurora Global Database", "ElastiCache"], answer: 0, explain: "DynamoDB Global Tables provide multi-region, multi-active database with bidirectional replication. All regions writable. Aurora Global Database has 1 primary region (writable), up to 5 secondary (read-only). Choose based on write pattern." },
      { cat: "design-performant", q: "Lambda Cold Start - how to minimize?", options: ["Provisioned concurrency keeps functions warm", "Increase memory", "Increase timeout", "Use reserved concurrency"], answer: 0, explain: "Provisioned concurrency keeps specified number of execution environments initialized and warm. Eliminates cold starts. Additional cost. For latency-sensitive production workloads. Reserved concurrency guarantees capacity but doesn't pre-warm." },
      { cat: "design-cost", q: "S3 Intelligent-Tiering vs manual lifecycle policies?", options: ["Intelligent-Tiering automatic based on access, lifecycle based on age", "Both manual", "Both automatic", "Lifecycle is automatic based on access"], answer: 0, explain: "Intelligent-Tiering automatically moves objects between access tiers based on access patterns (no retrieval fees, small monitoring fee). Lifecycle policies transition based on object age/creation date. I-T for unknown patterns, lifecycle for known patterns." },
      { cat: "design-secure", q: "AWS Organizations - what are SCPs?", options: ["Service Control Policies set maximum permissions for member accounts", "Billing policies", "Network policies", "Backup policies"], answer: 0, explain: "Service Control Policies (SCPs) set maximum permissions for accounts in organization. Don't grant permissions, only limit what IAM can grant. Inherit down OU tree. Essential for governance and compliance across accounts." },
      { cat: "design-resilient", q: "CloudFormation vs Terraform for IaC?", options: ["CloudFormation AWS-native with deep integration, Terraform multi-cloud", "Both AWS-only", "CloudFormation multi-cloud", "Both identical"], answer: 0, explain: "CloudFormation: AWS-native, deep AWS integration, JSON/YAML, free, automatic rollback. Terraform: multi-cloud, HCL language, state management, larger ecosystem. Choose based on cloud strategy and team experience." },
      { cat: "design-performant", q: "ElastiCache for Redis - which features require cluster mode?", options: ["Partitioning data across multiple shards", "Replication", "Encryption", "Backup"], answer: 0, explain: "Cluster mode enables horizontal scaling by partitioning data across multiple shards. Each shard can have replicas. Disabled mode has single shard with replicas. Enable cluster mode for datasets > memory of single node." },
      { cat: "design-secure", q: "AWS Certificate Manager (ACM) - where can certificates be deployed? (3 answers)", options: ["CloudFront", "Application Load Balancer", "API Gateway", "S3", "EC2 instances"], answer: [0, 1, 2], explain: "ACM certificates directly deploy to CloudFront, ALB/NLB, API Gateway, Elastic Beanstalk. Cannot directly deploy to EC2 - export or use ACM Private CA. Free public SSL/TLS certificates with automatic renewal." },
      { cat: "design-resilient", q: "S3 replication - does it replicate existing objects?", options: ["No, only new objects after replication enabled", "Yes, all objects automatically", "Yes, with S3 Batch Replication", "Cannot replicate any objects"], answer: 2, explain: "S3 replication (CRR/SRR) only replicates new objects by default. Use S3 Batch Replication to replicate existing objects. Both require versioning enabled on source and destination buckets." },
      { cat: "design-performant", q: "Route 53 geolocation vs geoproximity routing?", options: ["Geolocation routes by user location, geoproximity by distance with bias", "Both by location only", "Both by distance only", "Both identical"], answer: 0, explain: "Geolocation routing based on user's geographic location (continent, country, state). Geoproximity routing based on distance to resources with optional bias to shift traffic. Different use cases for compliance vs performance." },
      { cat: "design-cost", q: "EC2 instance termination - what happens to instance store?", options: ["Data lost permanently", "Data persists", "Data moved to EBS", "Data moved to S3"], answer: 0, explain: "Instance store is ephemeral - data lost on instance stop/termination/hardware failure. Use for temporary data, buffers, caches. For persistent data use EBS volumes with appropriate backup strategy." },
      { cat: "design-secure", q: "AWS WAF - what can it filter? (3 answers)", options: ["SQL injection patterns", "Cross-site scripting (XSS)", "IP addresses", "DDoS attacks (application layer)", "Network layer DDoS"], answer: [0, 1, 2, 3], explain: "WAF filters web traffic based on: IP addresses, geographic locations, request headers/body, URI strings, SQL injection, XSS, request size. Protects application layer (L7). Works with CloudFront, ALB, API Gateway." },
      { cat: "design-resilient", q: "DynamoDB on-demand vs provisioned capacity - when to use each?", options: ["On-demand for unpredictable workloads, provisioned for predictable", "On-demand for predictable", "Both same cost", "Provisioned more expensive"], answer: 0, explain: "On-demand: pay-per-request, no capacity planning, handles unpredictable traffic, more expensive per request. Provisioned: specify RCU/WCU, cheaper at steady state, predictable traffic. Can switch modes once per 24 hours." },
      { cat: "design-performant", q: "CloudFront signed URLs vs signed cookies - when to use signed URLs?", options: ["Individual file access restriction", "Multiple file access", "Streaming", "No specific use case"], answer: 0, explain: "Use signed URLs when restricting access to individual files, want to change URLs for access control, or using RTMP (deprecated). Use signed cookies for multiple files, don't want to change URLs, or restrictive URL length." },
      { cat: "design-secure", q: "AWS Secrets Manager automatic rotation - which databases supported natively? (3 answers)", options: ["RDS MySQL", "RDS PostgreSQL", "RDS Oracle", "RDS SQL Server", "DocumentDB", "Redshift"], answer: [0, 1, 4, 5], explain: "Secrets Manager natively supports rotation for: RDS MySQL, PostgreSQL, Oracle, SQL Server, MariaDB, Aurora; DocumentDB; Redshift. Provides Lambda functions for rotation. Custom rotation possible via Lambda for other secrets." },
      { cat: "design-resilient", q: "EBS volume deletion on instance termination - default behavior?", options: ["Root volume deleted, additional volumes persist by default", "All volumes deleted", "All volumes persist", "Root volume persists"], answer: 0, explain: "Root EBS volume has DeleteOnTermination=true by default. Additional EBS volumes have DeleteOnTermination=false by default. Can modify during instance launch or after. Important for data persistence planning." },
      { cat: "design-performant", q: "AWS Global Accelerator - how does it improve performance?", options: ["Routes traffic through AWS global network, anycast IPs", "Uses CloudFront cache", "Compresses data", "Uses better algorithms"], answer: 0, explain: "Global Accelerator provides 2 static anycast IPs that route traffic through AWS global network to optimal endpoint. Reduces internet hops, improves performance. Health checking and instant failover. For non-HTTP use cases." },
      { cat: "design-cost", q: "S3 storage class for infrequently accessed data needing ms retrieval?", options: ["S3 Standard-IA", "S3 Glacier", "S3 Glacier Deep Archive", "S3 One Zone-IA"], answer: 0, explain: "S3 Standard-IA: infrequently accessed data with millisecond retrieval, lower storage cost, retrieval fee. One Zone-IA cheaper but single AZ. Glacier: minutes to hours retrieval. Choose based on access frequency and durability needs." },
      { cat: "design-secure", q: "EC2 instance metadata service IMDSv2 vs IMDSv1 - key difference?", options: ["IMDSv2 requires session-oriented requests (more secure), v1 is request/response", "Both identical", "v1 more secure", "v2 deprecated"], answer: 0, explain: "IMDSv2 uses session-oriented approach (PUT to get token, then GET with token), prevents SSRF attacks. IMDSv1 simple request/response, vulnerable to certain attacks. Require IMDSv2 for better security posture." },
      { cat: "design-resilient", q: "Aurora Serverless vs Aurora provisioned - when to use Serverless?", options: ["Infrequent, intermittent, or unpredictable workloads", "24/7 high-throughput", "Predictable workloads", "Always use provisioned"], answer: 0, explain: "Aurora Serverless: automatically starts, scales, shuts down based on demand. Perfect for infrequent/intermittent/unpredictable workloads, dev/test, multi-tenant apps. Pay per second. Provisioned for steady-state production workloads." },
      { cat: "design-performant", q: "S3 Select vs Athena for querying S3 data?", options: ["S3 Select for simple queries on single files, Athena for complex queries across datasets", "Athena for simple queries", "Both identical", "S3 Select for complex queries"], answer: 0, explain: "S3 Select: retrieve subset of object data using SQL, reduces data transfer, simple queries, single objects. Athena: serverless interactive analytics, complex queries, joins, partitions, multiple files. Choose based on query complexity." },
      { cat: "design-cost", q: "EC2 placement groups - which type for lowest latency?", options: ["Cluster placement group in single AZ", "Spread placement group", "Partition placement group", "No placement group"], answer: 0, explain: "Cluster placement group packs instances close together in single AZ for lowest latency, highest network throughput (10Gbps). Spread separates instances to different hardware. Partition for distributed workloads. Choose based on requirements." },
      { cat: "design-secure", q: "AWS Systems Manager Parameter Store vs Secrets Manager for storing database passwords?", options: ["Secrets Manager for automatic rotation, Parameter Store cheaper without rotation", "Parameter Store auto-rotates", "Both identical", "Both cannot store passwords"], answer: 0, explain: "Secrets Manager: automatic rotation, cross-account access, $0.40/secret/month, RDS integration. Parameter Store: simpler, cheaper ($0 standard, $0.05 advanced), manual rotation, version tracking. Choose based on rotation needs." },
      { cat: "design-resilient", q: "ECS Fargate vs ECS EC2 launch type - when to use Fargate?", options: ["Fargate for serverless, no server management, pay per task", "EC2 for serverless", "Both manage servers", "Fargate requires EC2"], answer: 0, explain: "Fargate: serverless containers, no server management, pay per vCPU/memory per second, easier operations. EC2: manage cluster, more control, Reserved Instances for cost savings, special requirements. Choose based on operational model." },
      { cat: "design-performant", q: "DynamoDB DAX vs ElastiCache - when to use DAX?", options: ["DAX purpose-built for DynamoDB with microsecond latency", "ElastiCache for DynamoDB", "Both identical", "DAX for any database"], answer: 0, explain: "DAX: in-memory cache purpose-built for DynamoDB, microsecond latency, write-through cache, simple integration, DynamoDB API compatible. ElastiCache: general-purpose cache for any database, requires code changes. Use DAX for DynamoDB." },
      { cat: "design-secure", q: "AWS Organizations consolidated billing - what features? (3 answers)", options: ["Volume discounts across accounts", "Single payment method", "Cost allocation by account", "Automatic resource sharing", "Cross-account IAM"], answer: [0, 1, 2], explain: "Consolidated billing: single payment for all accounts, combined usage for volume discounts, detailed cost reports by account, free feature. Doesn't automatically share resources or merge IAM - those are separate features." },
      { cat: "design-resilient", q: "S3 Object Lock vs Glacier Vault Lock?", options: ["Object Lock for S3 WORM, Vault Lock for Glacier compliance policies", "Both for S3", "Both for Glacier", "Both identical"], answer: 0, explain: "S3 Object Lock: WORM (Write Once Read Many) for individual S3 objects, retention periods, legal holds. Glacier Vault Lock: enforce compliance controls on Glacier vault with lockable policy. Different services, similar compliance concepts." },
      { cat: "design-performant", q: "AppSync vs API Gateway - primary difference?", options: ["AppSync for GraphQL, API Gateway for REST/WebSocket", "Both for REST only", "AppSync for REST", "Both for GraphQL only"], answer: 0, explain: "AppSync: managed GraphQL service, real-time subscriptions, offline sync, multiple data sources. API Gateway: REST APIs, HTTP APIs, WebSocket APIs, extensive integration options. Choose based on API type and requirements." }
    ];

    // AWS Services Reference
    const awsServices = [
      { name: "EC2", desc: "Virtual servers in the cloud", cat: "Compute" },
      { name: "Lambda", desc: "Serverless compute - run code without servers", cat: "Compute" },
      { name: "ECS/EKS", desc: "Container orchestration (Docker/Kubernetes)", cat: "Compute" },
      { name: "Fargate", desc: "Serverless containers", cat: "Compute" },
      { name: "S3", desc: "Object storage with 11 9s durability", cat: "Storage" },
      { name: "EBS", desc: "Block storage for EC2 instances", cat: "Storage" },
      { name: "EFS", desc: "Managed NFS file system", cat: "Storage" },
      { name: "Glacier", desc: "Low-cost archive storage", cat: "Storage" },
      { name: "RDS", desc: "Managed relational databases", cat: "Database" },
      { name: "Aurora", desc: "High-performance MySQL/PostgreSQL compatible", cat: "Database" },
      { name: "DynamoDB", desc: "NoSQL key-value with single-digit ms latency", cat: "Database" },
      { name: "ElastiCache", desc: "In-memory caching (Redis/Memcached)", cat: "Database" },
      { name: "Redshift", desc: "Data warehouse for analytics", cat: "Database" },
      { name: "VPC", desc: "Isolated virtual network", cat: "Networking" },
      { name: "CloudFront", desc: "Content delivery network (CDN)", cat: "Networking" },
      { name: "Route 53", desc: "DNS and domain registration", cat: "Networking" },
      { name: "API Gateway", desc: "Create and manage APIs", cat: "Networking" },
      { name: "Direct Connect", desc: "Dedicated network to AWS", cat: "Networking" },
      { name: "ELB", desc: "Load balancing across targets", cat: "Networking" },
      { name: "IAM", desc: "Identity and access management", cat: "Security" },
      { name: "KMS", desc: "Encryption key management", cat: "Security" },
      { name: "Shield", desc: "DDoS protection", cat: "Security" },
      { name: "WAF", desc: "Web application firewall", cat: "Security" },
      { name: "GuardDuty", desc: "Threat detection with ML", cat: "Security" },
      { name: "CloudWatch", desc: "Monitoring and observability", cat: "Management" },
      { name: "CloudTrail", desc: "API activity logging", cat: "Management" },
      { name: "Config", desc: "Resource configuration tracking", cat: "Management" },
      { name: "SQS", desc: "Message queuing service", cat: "Integration" },
      { name: "SNS", desc: "Pub/sub messaging", cat: "Integration" },
      { name: "EventBridge", desc: "Event bus for applications", cat: "Integration" }
    ];

    // State
    let currentCert = DB.getOne('currentCert') || 'clf';
    let currentCategory = 'all';
    let questions = currentCert === 'clf' ? clfQuestions : saaQuestions;
    let filteredQuestions = [...questions];
    let currentQuestionIndex = 0;
    let quizStats = DB.getOne('quizStats_' + currentCert) || { correct: 0, total: 0, bestStreak: 0, currentStreak: 0, byCategory: {} };
    let answeredQuestions = DB.get('answeredQuestions_' + currentCert) || [];

    // Exam State
    let examQuestions = [];
    let examIndex = 0;
    let examAnswers = [];
    let examTimer = null;
    let examTimeLeft = 0;

    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function switchCert() {
      currentCert = document.getElementById('certSelector').value;
      DB.setOne('currentCert', currentCert);
      questions = currentCert === 'clf' ? clfQuestions : saaQuestions;
      quizStats = DB.getOne('quizStats_' + currentCert) || { correct: 0, total: 0, bestStreak: 0, currentStreak: 0, byCategory: {} };
      answeredQuestions = DB.get('answeredQuestions_' + currentCert) || [];
      filteredQuestions = [...questions];
      shuffleArray(filteredQuestions);
      currentQuestionIndex = 0;
      currentCategory = 'all';
      updateUI();
      loadQuestion();
    }

    function updateUI() {
      const cert = certifications[currentCert];
      document.getElementById('currentCertName').textContent = cert.name;
      document.getElementById('certBadge').textContent = cert.code;
      document.getElementById('certBadge').className = 'cert-badge ' + currentCert;
      document.getElementById('passScore').textContent = cert.passScore + '%';
      document.getElementById('examQuestions').textContent = cert.questions;
      document.getElementById('examTime').textContent = cert.time + ' min';
      document.getElementById('quizCertTitle').textContent = 'AWS ' + cert.name;
      document.getElementById('examQCount').textContent = cert.questions;
      document.getElementById('examTCount').textContent = cert.time;
      document.getElementById('examPScore').textContent = cert.passScore + '%';

      // Update category buttons
      const btnContainer = document.getElementById('categoryBtns');
      btnContainer.innerHTML = `<button class="btn btn-primary category-btn" data-cat="all" onclick="setCategory('all')">All Domains</button>`;
      cert.domains.forEach(d => {
        btnContainer.innerHTML += `<button class="btn btn-secondary category-btn" data-cat="${d}" onclick="setCategory('${d}')">${cert.domainLabels[d]}</button>`;
      });

      // Update domain progress
      const progContainer = document.getElementById('domainProgress');
      progContainer.innerHTML = '';
      cert.domains.forEach(d => {
        const stats = quizStats.byCategory[d] || { correct: 0, total: 0 };
        const pct = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
        const progClass = pct >= 70 ? 'good' : pct >= 40 ? 'medium' : 'low';
        progContainer.innerHTML += `
          <div>
            <label>${cert.domainLabels[d]}</label>
            <div class="progress-bar"><div class="progress-fill ${progClass}" style="width:${pct}%"></div></div>
            <span style="font-size:.75rem;color:var(--muted)">${stats.correct}/${stats.total} (${pct}%)</span>
          </div>
        `;
      });

      updateDashboard();
    }

    function setCategory(cat) {
      currentCategory = cat;
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('btn-primary');
        btn.classList.add('btn-secondary');
        if (btn.dataset.cat === cat) {
          btn.classList.add('btn-primary');
          btn.classList.remove('btn-secondary');
        }
      });
      filteredQuestions = cat === 'all' ? [...questions] : questions.filter(q => q.cat === cat);
      shuffleArray(filteredQuestions);
      currentQuestionIndex = 0;
      loadQuestion();
    }

    function loadQuestion() {
      if (filteredQuestions.length === 0) {
        document.getElementById('quizQuestion').textContent = 'No questions in this category!';
        document.getElementById('quizOptions').innerHTML = '';
        return;
      }
      const q = filteredQuestions[currentQuestionIndex];
      const cert = certifications[currentCert];
      document.getElementById('quizCategory').textContent = cert.domainLabels[q.cat] || q.cat;
      document.getElementById('quizQuestion').textContent = q.q;
      document.getElementById('questionCounter').textContent = `(${currentQuestionIndex + 1}/${filteredQuestions.length})`;
      document.getElementById('quizOptions').innerHTML = q.options.map((opt, i) => `
        <div class="quiz-option" onclick="checkAnswer(${i})">${opt}</div>
      `).join('');
      document.getElementById('quizExplanation').style.display = 'none';
      document.getElementById('nextQuizBtn').style.display = 'none';
    }

    function checkAnswer(selected) {
      const q = filteredQuestions[currentQuestionIndex];
      const options = document.querySelectorAll('#quizOptions .quiz-option');
      options.forEach((opt, i) => {
        opt.style.pointerEvents = 'none';
        if (i === q.answer) opt.classList.add('correct');
        if (i === selected && selected !== q.answer) opt.classList.add('incorrect');
      });

      quizStats.total++;
      if (!quizStats.byCategory[q.cat]) quizStats.byCategory[q.cat] = { correct: 0, total: 0 };
      quizStats.byCategory[q.cat].total++;

      if (selected === q.answer) {
        quizStats.correct++;
        quizStats.currentStreak++;
        quizStats.byCategory[q.cat].correct++;
        if (quizStats.currentStreak > quizStats.bestStreak) quizStats.bestStreak = quizStats.currentStreak;
      } else {
        quizStats.currentStreak = 0;
        answeredQuestions.push({ q: q.q, cat: q.cat, correct: false, date: new Date().toISOString() });
      }

      DB.setOne('quizStats_' + currentCert, quizStats);
      DB.set('answeredQuestions_' + currentCert, answeredQuestions.slice(-200));

      const explainEl = document.getElementById('quizExplanation');
      explainEl.innerHTML = `<strong>${selected === q.answer ? '‚úÖ Correct!' : '‚ùå Incorrect'}</strong><br>${q.explain}`;
      explainEl.style.display = 'block';
      explainEl.style.borderLeftColor = selected === q.answer ? 'var(--success)' : 'var(--danger)';

      document.getElementById('nextQuizBtn').style.display = 'inline-block';
      updateUI();
    }

    function nextQuestion() {
      currentQuestionIndex = (currentQuestionIndex + 1) % filteredQuestions.length;
      if (currentQuestionIndex === 0) shuffleArray(filteredQuestions);
      loadQuestion();
    }

    function resetQuiz() {
      if (confirm('Reset all progress for ' + certifications[currentCert].name + '?')) {
        quizStats = { correct: 0, total: 0, bestStreak: 0, currentStreak: 0, byCategory: {} };
        answeredQuestions = [];
        DB.setOne('quizStats_' + currentCert, quizStats);
        DB.set('answeredQuestions_' + currentCert, []);
        updateUI();
      }
    }

    function updateDashboard() {
      document.getElementById('totalAnswered').textContent = quizStats.total;
      document.getElementById('totalAccuracy').textContent = quizStats.total > 0 ? Math.round((quizStats.correct / quizStats.total) * 100) + '%' : '--%';
      document.getElementById('bestStreak').textContent = quizStats.bestStreak;

      const accuracy = quizStats.total > 0 ? (quizStats.correct / quizStats.total) * 100 : 0;
      const cert = certifications[currentCert];
      const ready = accuracy >= cert.passScore && quizStats.total >= 30;
      document.getElementById('examReady').textContent = ready ? 'Yes!' : 'No';
      document.getElementById('examReady').style.color = ready ? 'var(--success)' : 'var(--danger)';

      // Weak areas
      const container = document.getElementById('weakAreas');
      const wrongByCat = {};
      answeredQuestions.filter(a => !a.correct).forEach(a => {
        wrongByCat[a.cat] = (wrongByCat[a.cat] || 0) + 1;
      });
      const weakCats = Object.entries(wrongByCat).sort((a, b) => b[1] - a[1]).slice(0, 3);

      if (weakCats.length === 0) {
        container.innerHTML = '<div class="insight positive">No weak areas yet - keep practicing!</div>';
      } else {
        container.innerHTML = weakCats.map(([cat, count]) => `
          <div class="data-item" onclick="document.querySelector('[data-tab=quiz]').click(); setCategory('${cat}')">
            <div class="data-item-info">
              <div class="data-item-title">${cert.domainLabels[cat] || cat}</div>
              <div class="data-item-meta">${count} incorrect - Click to practice</div>
            </div>
            <div class="data-item-value" style="color:var(--danger)">${count}</div>
          </div>
        `).join('');
      }
    }

    // Exam Functions
    function startExam() {
      const cert = certifications[currentCert];
      examQuestions = [...questions];
      shuffleArray(examQuestions);
      examQuestions = examQuestions.slice(0, cert.questions);
      examIndex = 0;
      examAnswers = new Array(cert.questions).fill(-1);
      examTimeLeft = cert.time * 60;

      document.getElementById('examStart').style.display = 'none';
      document.getElementById('examInProgress').style.display = 'block';
      document.getElementById('examResults').style.display = 'none';

      loadExamQuestion();
      examTimer = setInterval(updateExamTimer, 1000);
    }

    function loadExamQuestion() {
      const q = examQuestions[examIndex];
      document.getElementById('examProgress').textContent = `Question ${examIndex + 1} of ${examQuestions.length}`;
      document.getElementById('examQuestion').textContent = q.q;
      document.getElementById('examOptions').innerHTML = q.options.map((opt, i) => `
        <div class="quiz-option ${examAnswers[examIndex] === i ? 'selected' : ''}" onclick="selectExamAnswer(${i})" style="${examAnswers[examIndex] === i ? 'border-color:var(--aws-orange)' : ''}">${opt}</div>
      `).join('');
    }

    function selectExamAnswer(i) {
      examAnswers[examIndex] = i;
      loadExamQuestion();
    }

    function examNext() {
      if (examIndex < examQuestions.length - 1) {
        examIndex++;
        loadExamQuestion();
      } else {
        endExam();
      }
    }

    function updateExamTimer() {
      examTimeLeft--;
      const mins = Math.floor(examTimeLeft / 60);
      const secs = examTimeLeft % 60;
      document.getElementById('examTimer').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
      if (examTimeLeft <= 0) endExam();
    }

    function endExam() {
      clearInterval(examTimer);
      let correct = 0;
      examQuestions.forEach((q, i) => {
        if (examAnswers[i] === q.answer) correct++;
      });
      const score = Math.round((correct / examQuestions.length) * 100);
      const cert = certifications[currentCert];
      const passed = score >= cert.passScore;

      document.getElementById('examInProgress').style.display = 'none';
      document.getElementById('examResults').style.display = 'block';
      document.getElementById('examScore').textContent = score + '%';
      document.getElementById('examCorrect').textContent = correct + '/' + examQuestions.length;
      document.getElementById('examResult').textContent = passed ? '‚úÖ PASSED' : '‚ùå FAILED';
      document.getElementById('examResult').style.color = passed ? 'var(--success)' : 'var(--danger)';
    }

    function restartExam() {
      document.getElementById('examStart').style.display = 'block';
      document.getElementById('examResults').style.display = 'none';
    }

    // Services
    function loadServices() {
      document.getElementById('serviceGrid').innerHTML = awsServices.map(s => `
        <div class="service-card">
          <div class="service-name">${s.name}</div>
          <div class="service-desc">${s.desc}</div>
          <span style="font-size:.75rem;background:var(--card);padding:.25rem .5rem;border-radius:4px">${s.cat}</span>
        </div>
      `).join('');
    }

    function filterServices() {
      const search = document.getElementById('serviceSearch').value.toLowerCase();
      const filtered = awsServices.filter(s =>
        s.name.toLowerCase().includes(search) ||
        s.desc.toLowerCase().includes(search) ||
        s.cat.toLowerCase().includes(search)
      );
      document.getElementById('serviceGrid').innerHTML = filtered.map(s => `
        <div class="service-card">
          <div class="service-name">${s.name}</div>
          <div class="service-desc">${s.desc}</div>
          <span style="font-size:.75rem;background:var(--card);padding:.25rem .5rem;border-radius:4px">${s.cat}</span>
        </div>
      `).join('');
    }

    // Initialize
    document.getElementById('certSelector').value = currentCert;
    shuffleArray(filteredQuestions);
    updateUI();
    loadQuestion();
    loadServices();
  </script>
</body>
</html>
